"bundle";!function(){var a=System.amdDefine;a("app/active-trip.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/cselect"></require><require from="app/components/trips/trip-duration"></require><div id="active-trip" if.bind="completed"><center><div class="content-block-title color-green">Trip completed successfully.</div><div class="content-block"><p class="color-green">Continue with other <a class="pointer" route-href="route: parties">trips</a></p></div></center></div><div id="active-trip" if.bind="!completed"><div class="text-center"><div class="col-auto"><i class="f7-icons size-50">time</i> <span id="start-time"><trip-duration start-time.bind="app.appContext.tripStartTime"></trip-duration></span></div></div><div class="content-block"><div class="list-block media-list" repeat.for="party of activeTripParties"><ul class="no-top-bottom-border"><li class="card"><div class="card-content"><div class="item-content"><div class="item-media" if.bind="hasMoreThanOneActiveTrips"><a click.delegate="completeSingleTrip(party)" type="button" class="button button-raised">Drop Off</a></div><div class="item-inner"><div class="item-title-row"><div class="item-title">${party.partyName}</div><div class="item-after">${party.partyNumber}</div></div><div class="item-subtitle">${party.paddedNumber}</div><div class="item-text"><div class="row"><p>From: ${party.pickup}</p><p>To: ${party.destination}</p></div></div></div></div></div></li></ul></div></div><div class="content-block"><div class="row text-center"><div class="col-auto"><a click.delegate="addParty()" class="button button-raised button-round">ADD PARTY</a></div><div class="col-auto"><a click.delegate="endTrip()" class="button button-raised button-round">END TRIP</a></div></div></div></div></template>'})}(),System.register("app/active-trip.js",["app/app-base","aurelia-router","app/models/trip","moment","local-storage","app/utils","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){g=a.AppBase},function(a){h=a.RedirectToRoute},function(a){i=a.TripModel},function(a){j=a["default"]},function(a){k=a["default"]},function(a){l=a.Utils},function(a){m=a.computedFrom}],execute:function(){n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ActiveTrip",(o=m("activeTripParties.length"),p=function(a){function b(){c(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=d(this,a.call.apply(a,[this].concat(f)));return h.completed=!1,h.tripAddPartyView="app/components/trips/trip-add-party",h.confirmEndView="app/components/trips/confirm-end",h}return e(b,a),b.prototype.canActivate=function(){return this.app.appContext.driverHasActiveTrip()?(this.activeTrip=new i(this.app.appContext.activeTrip),!0):new h("parties")},b.prototype.activate=function(){var a=this,b=function(){return a.app.appContext.midTripPartyIds=[],a.app.appContext.startTripPartyIds||(a.app.appContext.startTripPartyIds=[]),a.activeTripParties=a.app.appContext.reservedActiveParties.filter(function(b){return a.app.appContext.startTripPartyIds.includes(b.id)}),a.startTripParties=[].concat(a.activeTripParties),a.app.appContext.loadCurrentDriverShuttleId(),a.app.appContext.endTrip=!1,a.app.appContext.loadLocations().then(function(){a.destinations=a.app.appContext.locations.filter(function(b){return b.name!=a.activeTrip.pickup}).map(function(a){return a.name})})},c="npts:trip-"+this.activeTrip.id;return this.app.appContext.reservedActiveParties?(this.app.appContext.tripStartTime=j().unix(),k(c,this.app.appContext.tripStartTime),b()):this.app.appContext.loadReservedActiveParties().then(function(){return 0!=a.app.appContext.reservedActiveParties.length?(a.app.appContext.tripStartTime=k.get(c),a.app.appContext.tripStartTime||(a.app.appContext.tripStartTime=a.activeTrip.departureTime.utc),b()):void a.app.router.navigateToRoute("parties").then(function(){a.app.notifier.danger("No parties are available")})})},b.prototype.canDeactivate=function(){return!this.app.authContext.isAuthenticated||Array.isArray(this.app.appContext.reservedActiveParties)&&this.app.appContext.reservedActiveParties.length>0&&this.completed},b.prototype.endTrip=function(){var a=this;this.dialogOpen(this.confirmEndView,this.activeTrip,function(){if(a.app.appContext.endTrip){var b=a.activeTrip,c={};b.destination&&(c={destination:b.destination});var d=a.app.appContext.endTripPartyIds;c=Object.assign({},c,{partyIds:d});var e=a.app.authContext.currentUser.id,f=a.app.api;f.completeTrip(e,b.id,c).then(function(){a.completed=!0,f.notifier.success("Trip completed successfully.")})["catch"](function(a){return f.notifier.danger(a)})}})},b.prototype.completeSingleTrip=function(a){var b=this,c=this.app.authContext.currentUser.id,d=this.app.api;d.completeSingleTrip(c,a.departureTime,this.app.appContext.tripStartTime,a.pickup,a.destination,this.app.appContext.driverShuttleId,a.id).then(function(){var c=function(a,b){l.removeFromCollection(a,b)};c(a,b.app.appContext.reservedActiveParties),c(a,b.startTripParties),c(a,b.activeTripParties),d.notifier.success("Party dropped off successfully.")})["catch"](function(a){d.notifier.danger(a)})},b.prototype.addParty=function(){var a=this;this.app.appContext.loadReservedActiveParties().then(function(){a.dialogOpen(a.tripAddPartyView,a.activeTrip,function(){var b=a.app.appContext.reservedActiveParties.filter(function(b){return a.app.appContext.midTripPartyIds.includes(b.id)});b.length>0&&(a.activeTripParties=a.startTripParties.concat(b))})})},b.prototype.dialogOpen=function(a,b,c){this.app.appContext.showPopup(a,b,c)},n(b,[{key:"hasMoreThanOneActiveTrips",get:function(){return this.activeTripParties.length>1}}]),b}(g),f(p.prototype,"hasMoreThanOneActiveTrips",[o],Object.getOwnPropertyDescriptor(p.prototype,"hasMoreThanOneActiveTrips"),p.prototype),q=p)),a("ActiveTrip",q)}}}),function(){var a=System.amdDefine;a("app/app.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="./main-view"></require><require from="./popup"></require><require from="./n-popup"></require><div class="statusbar-overlay"></div><popup></popup><n-popup></n-popup><main-view if.bind="showMainView" router.bind="router" containerless></main-view><router-view if.bind="!showMainView"></router-view></template>'})}(),function(){var a=System.amdDefine;a("app/auth/login.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="./login/pin.html"></require><require from="./login/password.html"></require><require from="app/components/submit"></require><div class="view"><div class="page"><div class="page-content login-screen-content"><div class="login-screen-title">NPTS Shuttle App</div><form role="form" submit.delegate="submit()"><div class="content-block"><pin model.bind="self" locations.bind="locations" if.bind="app.appContext.pinLogin"></pin><password model.bind="self" if.bind="!app.appContext.pinLogin"></password><submit text="Login"></submit><div class="list-block"><ul><li class="item-content" if.bind="app.appContext.pinLogin"><div class="item-inner"><a click.delegate="loginWithPassword()" class="pointer">Login with Username and Password</a></div></li><li class="item-content" if.bind="!app.appContext.pinLogin"><div class="item-inner"><a click.delegate="loginWithPin()" class="pointer">Login with Pin</a></div></li></ul></div></div></form></div></div></div></template>'})}(),System.register("app/auth/login.js",["app/auth-service","aurelia-framework","app/app","app/bootstrap","app/utils","app/collection"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.AuthService},function(a){g=a.inject},function(a){h=a.App},function(a){i=a.Bootstrap},function(a){j=a.Utils},function(a){k=a.Collection}],execute:function(){n=function(){var a=this.app.appContext.pinLogin;return a?this.authService.pinLogin(this.locationId,this.pin):this.authService.passwordLogin(this.username,this.password)},a("Login",(l=g(h,f),o=l(m=function(a){function b(e,f){c(this,b);for(var g=arguments.length,h=Array(g>2?g-2:0),i=2;i<g;i++)h[i-2]=arguments[i];var j=d(this,a.call.apply(a,[this].concat(h)));return j.pin="",j.username="",j.password="",j.self=j,j.app=e,j.router=e.router,j.authService=f,j}return e(b,a),b.prototype.activate=function(){j.isNullOrUndefined(this.app.appContext.pinLogin)&&(this.app.appContext.pinLogin=!0)},b.prototype.loginWithPassword=function(){this.app.appContext.pinLogin=!1},b.prototype.loginWithPin=function(){this.app.appContext.pinLogin=!0},b.prototype.login=function(){var a=this,b=function(){n.call(a).then(function(b){a.router.navigateToRoute("home")})["catch"](function(b){var c="Login failed...";b&&b.message&&(c=b.message),a.app.notifier.danger(c)})};this.app.authContext.isAuthenticated?this.authService.logout().then(function(){b()}):b()},b.prototype.submitSuccess=function(){var a=this;return function(){return a.login()}},b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.username}).required().ensure(function(a){return a.pin}).required().ensure(function(a){return a.password}).required()},b}(i))||m)),a("Login",o)}}}),function(){var a=System.amdDefine;a("app/auth/login/password.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="model"><div class="list-block"><ul><li class="item-content"><div class="item-media"><i class="icon icon-form-name"></i></div><div class="item-inner"><div class="item-input"><input type="text" value.bind="model.username & validate" placeholder="Username"></div></div></li><li class="item-content"><div class="item-media"><i class="icon icon-form-password"></i></div><div class="item-inner"><div class="item-input"><input type="password" value.bind="model.password & validate" placeholder="Password"></div></div></li><li class="item-content"><div class="item-inner"><a class="pointer" route-href="route: reset-password-request">Forgot Password?</a></div></li></ul></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/login/pin.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="model"><div class="list-block"><ul><li class="item-content"><div class="item-media"><i class="icon icon-form-password"></i></div><div class="item-inner"><div class="item-input"><input type="password" value.bind="model.pin & validate" placeholder="Enter Pin"></div></div></li><li class="item-content"><div class="item-inner"><a class="pointer" route-href="route: reset-pin-request">Forgot Pin?</a></div></li></ul></div></template>'})}(),System.register("app/auth/logout.js",["aurelia-framework","app/app","app/auth-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.inject},function(a){e=a.App},function(a){f=a.AuthContext}],execute:function(){a("Logout",(g=d(e,f),i=g(h=function(){function a(b,d){c(this,a),this.app=b,this.authContext=d}return a.prototype.canActivate=function(){return this.authContext.isAuthenticated()},a.prototype.activate=function(){return this.app.logout()},a}())||h)),a("Logout",i)}}}),function(){var a=System.amdDefine;a("app/auth/reset-password-confirm.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="./reset-password/confirm-failed.html"></require><require from="./reset-password/request-confirmed"></require><require from="./reset-password/reset-success.html"></require><require from="./reset-password/reset-failed.html"></require><div class="view"><div class="page"><div class="page-content"><div class="login-screen-title"><a route-href="route: home">${router.title}</a></div><request-confirmed actions.bind="onSuccess" if.bind="requestConfirmed"></request-confirmed><confirm-failed confirm-failed-reason.bind="confirmFailedReason" if.bind="confirmFailed"></confirm-failed><reset-success if.bind="resetSuccess"></reset-success><reset-failed reset-failed-reason.bind="resetFailedReason" if.bind="resetFailed"></reset-failed></div></div></div></template>'})}(),System.register("app/auth/reset-password-confirm.js",["aurelia-framework","app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){e=a.computedFrom,f=a.inject},function(a){g=a.App}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ResetPasswordConfirm",(i=f(g),j=e("status"),k=e("status"),l=e("status"),m=e("status"),n=e("status"),q=i((p=function(){function a(b){var d=this;c(this,a),this.onSuccess={success:function(a){return d.resetPassword(a)}},this.app=b,this.router=b.router}return a.prototype.activate=function(a){var b=this;return this.token=a.token,this.app.api.confirmResetPasswordRequest(this.token).then(function(a){b.status="requestConfirmed"})["catch"](function(a){b.status="confirmFailed",b.confirmFailedReason=a})},a.prototype.resetPassword=function(a){var b=this;this.app.api.resetPassword(a.password,this.token).then(function(a){b.status="resetSuccess"})["catch"](function(a){b.resetFailedReason=a,b.status="resetFailed"})},h(a,[{key:"resetFailed",get:function(){return"resetFailed"==this.status}},{key:"requestConfirmed",get:function(){return"requestConfirmed"==this.status}},{key:"confirmFailed",get:function(){return"confirmFailed"==this.status}},{key:"resetSuccess",get:function(){return"resetSuccess"==this.status}}]),a}(),d(p.prototype,"resetFailed",[j],Object.getOwnPropertyDescriptor(p.prototype,"resetFailed"),p.prototype),d(p.prototype,"requestConfirmed",[k],Object.getOwnPropertyDescriptor(p.prototype,"requestConfirmed"),p.prototype),d(p.prototype,"confirmFailed",[l],Object.getOwnPropertyDescriptor(p.prototype,"confirmFailed"),p.prototype),d(p.prototype,"resetSuccess",[m],Object.getOwnPropertyDescriptor(p.prototype,"resetSuccess"),p.prototype),d(p.prototype,"resetFailed",[n],Object.getOwnPropertyDescriptor(p.prototype,"resetFailed"),p.prototype),o=p))||o)),a("ResetPasswordConfirm",q)}}}),function(){var a=System.amdDefine;a("app/auth/reset-password-request.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/submit"></require><require from="./reset-password/request-form"></require><require from="./reset-password/request-success.html"></require><div class="view"><div class="page"><div class="page-content"><div class="login-screen-title"><a route-href="route: home">${router.title}</a></div><request-form if.bind="!resetRequestSuccess" actions.bind="onSuccess"></request-form><request-success if.bind="resetRequestSuccess"></request-success></div></div></div></template>'})}(),System.register("app/auth/reset-password-request.js",["aurelia-framework","app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.App}],execute:function(){a("ResetPasswordRequest",(f=d(e),h=f(g=function(){function a(b){var d=this;c(this,a),this.resetRequestSuccess=!1,this.onSuccess={success:function(){return d.requestResetPassword()}},this.app=b,this.router=b.router}return a.prototype.requestResetPassword=function(){var a=this;this.app.api.requestResetPassword(this.username).then(function(b){a.resetRequestSuccess=!0})["catch"](function(b){a.app.notifier.danger(b)})},a}())||g)),a("ResetPasswordRequest",h)}}}),function(){var a=System.amdDefine;a("app/auth/reset-password/confirm-failed.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="confirmFailedReason"><div class="content-block-title">Confirmation Failed</div><div class="card"><div class="card-content"><div class="card-content-inner"><p class="color-red">${confirmFailedReason}</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-password/request-confirmed.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/submit"></require><div class="content-block-title">Change Password</div><div class="card"><div class="card-content"><div class="card-content-inner"><form><div class="list-block"><ul><li class="item-content"><div class="item-inner"><p class="color-green">Your request has been confirmed, submit the form below to change your password.</p></div></li><li class="item-content"><div class="item-media"><i class="icon icon-form-password"></i></div><div class="item-inner"><div class="item-input"><input type="password" value.bind="password & validate" placeholder="New Password"></div></div></li><li class="item-content"><div class="item-media"><i class="icon icon-form-password"></i></div><div class="item-inner"><div class="item-input"><input type="password" value.bind="confirmPassword & validate" placeholder="Confirm Password"></div></div></li></ul></div></form></div></div></div><div class="content-block"><submit text="Change Password"></submit></div></template>'})}(),System.register("app/auth/reset-password/request-confirmed.js",["app/bootstrap"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Bootstrap}],execute:function(){a("RequestConfirmedCustomElement",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.password="",f.confirmPassword="",g=e,d(f,g)}return e(b,a),b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.password}).required().ensure(function(a){return a.confirmPassword}).required().satisfies(function(a,b){return a===b.password}).withMessage("Passwords must match")},b}(f)),a("RequestConfirmedCustomElement",g)}}}),function(){var a=System.amdDefine;a("app/auth/reset-password/request-form.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/submit"></require><div class="content-block-title">Reset Password Request</div><div class="card"><div class="card-content"><div class="card-content-inner"><form><div class="list-block"><ul><li class="item-content"><div class="item-media"><i class="icon icon-form-name"></i></div><div class="item-inner"><div class="item-input"><input type="text" value.bind="username & validate" name="username" placeholder="Username"></div></div></li></ul></div></form></div></div></div><div class="content-block"><submit text="Request"></submit></div></template>'})}(),System.register("app/auth/reset-password/request-form.js",["app/bootstrap"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Bootstrap}],execute:function(){a("RequestFormCustomElement",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.username="",g=e,d(f,g)}return e(b,a),b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.username}).required()},b}(f)),a("RequestFormCustomElement",g)}}}),function(){var a=System.amdDefine;a("app/auth/reset-password/request-success.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="content-block-title">Reset Request Success</div><div class="card"><div class="card-content"><div class="card-content-inner bg-green"><p>Please check your email, if a user with that username exists, instructions will be sent to the user\'s email address.</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-password/reset-failed.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="resetFailedReason"><div class="content-block-title">Reset Password Failed</div><div class="card"><div class="card-content"><div class="card-content-inner"><p class="color-gray">Hmm, something went wrong, please try the confirm link again.</p><p></p><p class="color-red">Error: ${resetFailedReason}</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-password/reset-success.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="resetSuccess"><div class="content-block-title">Reset Password Success</div><div class="card"><div class="card-content"><div class="card-content-inner"><p class="color-green">Great, your password has been reset, you may proceed to <a route-href="route: login" class="pointer">login</a>.</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-pin-confirm.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="./reset-pin/confirm-failed.html"></require><require from="./reset-pin/request-confirmed"></require><require from="./reset-pin/reset-success.html"></require><require from="./reset-pin/reset-failed.html"></require><div class="view"><div class="page"><div class="page-content"><div class="login-screen-title"><a route-href="route: home">${router.title}</a></div><request-confirmed pin.bind="pin" actions.bind="onSuccess" if.bind="requestConfirmed"></request-confirmed><confirm-failed confirm-failed-reason.bind="confirmFailedReason" if.bind="confirmFailed"></confirm-failed><reset-success if.bind="resetSuccess"></reset-success><reset-failed reset-failed-reason.bind="resetFailedReason" if.bind="resetFailed"></reset-failed></div></div></div></template>'})}(),System.register("app/auth/reset-pin-confirm.js",["aurelia-framework","app/app","shortid"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){e=a.computedFrom,f=a.inject},function(a){g=a.App},function(a){h=a["default"]}],execute:function(){i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ResetPinConfirm",(j=f(g),k=e("status"),l=e("status"),m=e("status"),n=e("status"),o=e("status"),r=j((q=function(){function a(b){var d=this;c(this,a),this.onSuccess={success:function(a){return d.resetPin(a)}},this.app=b,this.router=b.router}return a.prototype.activate=function(a){var b=this;return this.token=a.token,this.app.api.confirmResetPinRequest(this.token).then(function(a){b.pin=h.generate(),b.status="requestConfirmed"})["catch"](function(a){b.status="confirmFailed",b.confirmFailedReason=a})},a.prototype.resetPin=function(a){var b=this;this.app.api.resetPin(a.pin,this.token).then(function(a){b.status="resetSuccess"})["catch"](function(a){b.resetFailedReason=a,b.status="resetFailed"})},i(a,[{key:"resetFailed",get:function(){return"resetFailed"==this.status}},{key:"requestConfirmed",get:function(){return"requestConfirmed"==this.status}},{key:"confirmFailed",get:function(){return"confirmFailed"==this.status}},{key:"resetSuccess",get:function(){return"resetSuccess"==this.status}}]),a}(),d(q.prototype,"resetFailed",[k],Object.getOwnPropertyDescriptor(q.prototype,"resetFailed"),q.prototype),d(q.prototype,"requestConfirmed",[l],Object.getOwnPropertyDescriptor(q.prototype,"requestConfirmed"),q.prototype),d(q.prototype,"confirmFailed",[m],Object.getOwnPropertyDescriptor(q.prototype,"confirmFailed"),q.prototype),d(q.prototype,"resetSuccess",[n],Object.getOwnPropertyDescriptor(q.prototype,"resetSuccess"),q.prototype),d(q.prototype,"resetFailed",[o],Object.getOwnPropertyDescriptor(q.prototype,"resetFailed"),q.prototype),p=q))||p)),a("ResetPinConfirm",r)}}}),function(){var a=System.amdDefine;a("app/auth/reset-pin-request.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/submit"></require><require from="./reset-pin/request-form"></require><require from="./reset-pin/request-success.html"></require><div class="view"><div class="page"><div class="page-content"><div class="login-screen-title"><a route-href="route: home">${router.title}</a></div><request-form if.bind="!resetRequestSuccess" actions.bind="onSuccess"></request-form><request-success if.bind="resetRequestSuccess"></request-success></div></div></div></template>'})}(),System.register("app/auth/reset-pin-request.js",["aurelia-framework","app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.App}],execute:function(){a("ResetPinRequest",(f=d(e),h=f(g=function(){function a(b){var d=this;c(this,a),this.resetRequestSuccess=!1,this.onSuccess={success:function(){return d.requestResetPin()}},this.app=b,this.router=b.router}return a.prototype.requestResetPin=function(){var a=this;this.app.api.requestResetPin(this.username).then(function(b){a.resetRequestSuccess=!0})["catch"](function(b){a.app.notifier.danger(b)})},a}())||g)),a("ResetPinRequest",h)}}}),function(){var a=System.amdDefine;a("app/auth/reset-pin/confirm-failed.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="confirmFailedReason"><div class="content-block-title">Confirmation Failed</div><div class="card"><div class="card-content"><div class="card-content-inner"><p class="color-red">${confirmFailedReason}</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-pin/request-confirmed.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/submit"></require><div class="content-block-title">Change Pin</div><div class="card"><div class="card-content"><div class="card-content-inner"><form role="form" submit.delegate="submit()"><div class="list-block"><ul><li class="item-content"><div class="item-inner"><p class="color-green">Your request has been confirmed, submit the form below to change your pin.</p></div></li><li class="item-content"><div class="item-inner"><p>This is your new pin code:<br><br><span class="color-green">${pin}</span><br><br>You will be able to login using your pin code after submitting the form below.</p></div></li></ul></div></form></div></div></div><div class="content-block"><submit text="Change Pin"></submit></div></template>'})}(),System.register("app/auth/reset-pin/request-confirmed.js",["app/bootstrap","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m;return{setters:[function(a){h=a.Bootstrap},function(a){i=a.bindable}],execute:function(){a("RequestConfirmedCustomElement",(j=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),m=0;m<i;m++)j[m]=arguments[m];return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"pin",k,g),c(g,"actions",l,g),h=f,e(g,h)}return f(b,a),b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.pin}).required()},b}(h),k=g(j.prototype,"pin",[i],{enumerable:!0,initializer:null}),l=g(j.prototype,"actions",[i],{
enumerable:!0,initializer:null}),m=j)),a("RequestConfirmedCustomElement",m)}}}),function(){var a=System.amdDefine;a("app/auth/reset-pin/request-form.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/submit"></require><div class="content-block-title">Reset Pin Request</div><div class="card"><div class="card-content"><div class="card-content-inner"><form role="form" submit.delegate="submit()"><div class="list-block"><ul><li class="item-content"><div class="item-media"><i class="icon icon-form-name"></i></div><div class="item-inner"><div class="item-input"><input type="text" value.bind="username & validate" name="username" placeholder="Username"></div></div></li></ul></div></form></div></div></div><div class="content-block"><submit text="Request"></submit></div></template>'})}(),System.register("app/auth/reset-pin/request-form.js",["app/bootstrap"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Bootstrap}],execute:function(){a("RequestFormCustomElement",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.username="",g=e,d(f,g)}return e(b,a),b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.username}).required()},b}(f)),a("RequestFormCustomElement",g)}}}),function(){var a=System.amdDefine;a("app/auth/reset-pin/request-success.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="content-block-title">Reset Request Success</div><div class="card"><div class="card-content"><div class="card-content-inner bg-green"><p>Please check your email, if a user with that username exists, instructions will be sent to the user\'s email address.</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-pin/reset-failed.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="resetFailedReason"><div class="content-block-title">Reset Password Failed</div><div class="card"><div class="card-content"><div class="card-content-inner"><p class="color-gray">Hmm, something went wrong, please try the confirm link again.</p><p></p><p class="color-red">Error: ${resetFailedReason}</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/auth/reset-pin/reset-success.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="resetSuccess"><div class="content-block-title">Reset Pin Success</div><div class="card"><div class="card-content"><div class="card-content-inner"><p class="color-green">Great, your pin has been reset.<br>you should receive an email with the new pin to keep for future reference.<br>You may use your pin to <a route-href="route: login" class="pointer">login</a> at this time.</p></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/components/back.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="title, action"><a click.delegate="action()" class="back pointer link"><i class="icon icon-back" style="transform: translate3d(0px, 0px, 0px)"></i><span>${title || \'Back\'}</span></a></template>'})}(),function(){var a=System.amdDefine;a("app/components/confirm.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><ai-dialog><ai-dialog-header><legend>${heading}</legend></ai-dialog-header><ai-dialog-body><div class="m-b-1">${message}?</div></ai-dialog-body><ai-dialog-footer><button click.delegate="controller.cancel()">Cancel</button> <button click.delegate="controller.ok(person)">Ok</button></ai-dialog-footer></ai-dialog></template>'})}(),function(){var a=System.amdDefine;a("app/components/cselect-popup.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/nav-popup.html"></require><nav-popup heading="${name}" actions.bind="actions"></nav-popup><div click.delegate="updateValue($event)" class="list-block"><ul><li repeat.for="item of list"><label class="label-radio item-content"><input data-title="${actions.name(item)}" if.bind="!isSelected(item)" id="${$index}" type="radio" name="radio" value="${actions.val(item)}"> <input data-title="${actions.name(item)}" if.bind="isSelected(item)" id="${$index}" type="radio" name="radio" value="${actions.val(item)}" checked="checked"><div class="item-inner"><div class="item-title">${actions.name(item)}</div></div></label></li></ul></div></template>'})}(),System.register("app/components/cselect-popup.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("CselectPopup",d=function(){function a(){c(this,a)}return a.prototype.activate=function(a){this.actions=a.actions,this.list=a.list,this.name=a.name,this.radioChecked={}},a.prototype.isSelected=function(a){return this.actions.isSelected(a)},a.prototype.updateValue=function(a){var b=a.target.parentElement;"item-inner"==b.className&&(b=b.parentElement);var c=b.firstElementChild,d=c.value,e=this.radioChecked[this.selectedId];e&&(e.checked=!1),this.selectedId=c.id,this.radioChecked[this.selectedId]=c,this.radioChecked[this.selectedId].checked=!0;var f=c.dataset.title;this.actions.update(d,f)},a}()),a("CselectPopup",d)}}}),function(){var a=System.amdDefine;a("app/components/cselect.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="list-block pointer"><ul class="no-top-bottom-border"><li><a click.delegate="openSelect()" class="item-link smart-select"><div class="item-content"><div class="item-inner"><!-- Select label --><div class="item-title">${title}</div><span if.bind="showEmpty">${emptyText}</span> <span if.bind="showBlank">Choose...</span><div class="item-after">${valueLabel}</div></div></div></a></li></ul></div></template>'})}(),System.register("app/components/cselect.js",["aurelia-framework","app/app-base"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return{setters:[function(a){h=a.bindable,i=a.bindingMode,j=a.computedFrom},function(a){k=a.AppBase}],execute:function(){l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("CselectCustomElement",(m=h({defaultBindingMode:i.twoWay}),n=j("options","emptyText","value"),o=j("blankText","value"),p=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"accessor",q,g),c(g,"options",r,g),c(g,"emptyText",s,g),c(g,"title",t,g),c(g,"blankText",u,g),c(g,"valueLabel",v,g),c(g,"value",w,g),g.selectPopupView="app/components/cselect-popup",g.actions={val:function(a){return g.val(a)},isSelected:function(a){return g.val(a)==g.value},name:function(a){return g.name(a)},update:function(a,b){return(g.value=a)&&(g.valueLabel=b)},closePopup:function(){return g.app.appContext.closeNPopup()}},h=f,e(g,h)}return f(b,a),b.prototype.val=function(a){return this.accessor?this.accessor.val(a):a.id||a.value||a},b.prototype.bind=function(){this.popupModel={list:this.options,name:this.title,actions:this.actions},this.valueLabel||(this.valueLabel=this.value),console.log("cselect label",this.value,this.valueLabel,this.options)},b.prototype.name=function(a){return this.accessor?this.accessor.name(a):a.name||a},b.prototype.openSelect=function(){this.app.appContext.showNPopup(this.selectPopupView,this.popupModel)},l(b,[{key:"showEmpty",get:function(){if(this.options&&this.emptyText&&!this.value)return 0==this.options.length&&this.emptyText.length>0}},{key:"showBlank",get:function(){if(this.blankText&&!this.value)return this.blankText.length>0}}]),b}(k),q=g(p.prototype,"accessor",[h],{enumerable:!0,initializer:null}),r=g(p.prototype,"options",[h],{enumerable:!0,initializer:null}),s=g(p.prototype,"emptyText",[h],{enumerable:!0,initializer:null}),t=g(p.prototype,"title",[h],{enumerable:!0,initializer:null}),u=g(p.prototype,"blankText",[h],{enumerable:!0,initializer:null}),v=g(p.prototype,"valueLabel",[h],{enumerable:!0,initializer:null}),w=g(p.prototype,"value",[m],{enumerable:!0,initializer:null}),g(p.prototype,"showEmpty",[n],Object.getOwnPropertyDescriptor(p.prototype,"showEmpty"),p.prototype),g(p.prototype,"showBlank",[o],Object.getOwnPropertyDescriptor(p.prototype,"showBlank"),p.prototype),x=p)),a("CselectCustomElement",x)}}}),function(){var a=System.amdDefine;a("app/components/date-time-picker.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="content-block-title">Departure</div><div class="content-block"><div class="content-block-inner" style="padding:0; margin-right:-15px; width:auto"><div style="margin:0" class="list-block"><ul style="border-top:none"><li><div class="item-content"><div class="item-inner"><div class="item-input"><input type="text" placeholder="Date Time" readonly="readonly" id="picker-date"></div></div></div></li></ul></div><div id="picker-date-container"></div></div></div></template>'})}(),System.register("app/components/date-time-picker.js",["aurelia-framework","moment","app/f7"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a.bindable,g=a.bindingMode},function(a){h=a["default"]},function(a){i=a.f7}],execute:function(){m=function(a){var b=a,c=b.getFullYear();i.picker({input:"#picker-date",container:"#picker-date-container",toolbar:!1,rotateEffect:!1,value:[b.getMonth(),b.getDate(),b.getFullYear(),b.getHours(),b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes()],onChange:function(a,b,c){var d=new Date(a.value[2],1*a.value[0]+1,0).getDate();b[1]>d&&(a.cols[1].setValue(d),this.value={utc:d.toString()})},formatValue:function(a,b,c){return c[0]+" "+b[1]+", "+b[2]+" "+b[3]+":"+b[4]},cols:[{values:"0 1 2 3 4 5 6 7 8 9 10 11".split(" "),displayValues:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),textAlign:"left"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},{values:function(){for(var a=[],b=c;b<=c+1;b++)a.push(b);return a}()},{divider:!0,content:"  "},{values:function(){for(var a=[],b=0;b<=23;b++)a.push(b);return a}()},{divider:!0,content:":"},{values:function(){for(var a=[],b=0;b<=59;b++)a.push(b<10?"0"+b:b);return a}()}]})},a("DateTimePickerCustomElement",(j=f({defaultBindingMode:g.twoWay}),k=function(){function a(){d(this,a),c(this,"value",l,this)}return a.prototype.attached=function(){var a=h().toDate(),b=void 0;this.value&&(b=h.unix(this.value.utc)).isValid()?a=b.toDate():this.value={utc:a},m(a)},a}(),l=e(k.prototype,"value",[j],{enumerable:!0,initializer:null}),n=k)),a("DateTimePickerCustomElement",n)}}}),function(){var a=System.amdDefine;a("app/components/delete.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><button disabled.bind="disabled" type="button" click.delegate="do()" class="btn btn-primary-outline">Archive <i class="fa fa-trash ${iconClass} p-l"></i></button></template>'})}(),System.register("app/components/confirm.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Confirm",d=function(){function a(){c(this,a),this.heading="Confirm",this.message=""}return a.prototype.activate=function(a){this.message=a.message,a.heading&&(this.heading=a.heading)},a}()),a("Confirm",d)}}}),System.register("app/components/delete.js",["aurelia-framework","./confirm"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.inject,g=a.bindable},function(a){h=a.Confirm}],execute:function(){a("Delete",(i=function(){function a(){d(this,a),c(this,"action",j,this),c(this,"disabled",k,this),c(this,"resource",l,this),c(this,"message",m,this),c(this,"iconClass",n,this)}return a.prototype.bind=function(){},a.prototype["do"]=function(){var a=this;this.dialog.open({viewModel:h,model:{message:this.message,heading:"Archive "+this.resource}}).then(function(b){b.wasCancelled||a.action()})},a}(),j=e(i.prototype,"action",[g],{enumerable:!0,initializer:function(){return function(){}}}),k=e(i.prototype,"disabled",[g],{enumerable:!0,initializer:null}),l=e(i.prototype,"resource",[g],{enumerable:!0,initializer:null}),m=e(i.prototype,"message",[g],{enumerable:!0,initializer:function(){return"Are you sure"}}),n=e(i.prototype,"iconClass",[g],{enumerable:!0,initializer:null}),o=i)),a("Delete",o)}}}),function(){var a=System.amdDefine;a("app/components/drivers-license.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="aurelia-mask"></require><input type="text" class="form-control" masked="value.bind: value; mask: *** ***;"></template>'})}(),System.register("app/components/drivers-license.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k;return{setters:[function(a){f=a.bindable,g=a.bindingMode}],execute:function(){a("DriversLicenseCustomElement",(h=f({defaultBindingMode:g.twoWay}),i=function b(){d(this,b),c(this,"value",j,this)},j=e(i.prototype,"value",[h],{enumerable:!0,initializer:null}),k=i)),a("DriversLicenseCustomElement",k)}}}),function(){var a=System.amdDefine;a("app/components/form-element.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="label, value"><li><div class="item-content"><div class="item-inner"><div class="item-title label">${label}</div><div class="item-input"><slot if.bind="!value"></slot><p if.bind="value">${value}</p></div></div></div></li></template>'})}(),function(){var a=System.amdDefine;a("app/components/loader.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><span show.bind="isLoading" class="preloader preloader-big"></span></template>'})}(),System.register("app/components/loader.js",["app/app","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j;return{setters:[function(a){e=a.App},function(a){f=a.computedFrom}],execute:function(){g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Loader",(h=f("app.appContext.api.isRequesting","app.appContext.net.isRequesting"),i=function(){function a(b){c(this,a),this.app=b}return a.inject=function(){return[e]},g(a,[{key:"isLoading",get:function(){return this.app.appContext.api.isRequesting||this.app.appContext.net.isRequesting}}]),a}(),d(i.prototype,"isLoading",[h],Object.getOwnPropertyDescriptor(i.prototype,"isLoading"),i.prototype),j=i)),a("Loader",j)}}}),function(){var a=System.amdDefine;a("app/components/nav-bar.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><compose if.bind="hasNavBarView" view-model.bind="navBarView"></compose></template>'})}(),System.register("app/components/nav-bar.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.bindable,g=a.computedFrom}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=["trips","show-trip-party","show-archived","active-trip","show-trip","show-party","parties","trips/show"],n=function(a){return m.includes(a)},a("NavBarCustomElement",(i=g("page"),j=g("page"),k=function(){function a(){d(this,a),c(this,"page",l,this)}return a.prototype.pageChanged=function(){this.page=this.page.replace("app/","")},h(a,[{key:"navBarView",get:function(){return"app/components/nav-bars/"+this.page}},{key:"hasNavBarView",get:function(){return n(this.page)}}]),a}(),l=e(k.prototype,"page",[f],{enumerable:!0,initializer:null}),e(k.prototype,"navBarView",[i],Object.getOwnPropertyDescriptor(k.prototype,"navBarView"),k.prototype),e(k.prototype,"hasNavBarView",[j],Object.getOwnPropertyDescriptor(k.prototype,"hasNavBarView"),k.prototype),o=k)),a("NavBarCustomElement",o)}}}),System.register("app/components/nav-bars/active-trip.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("Trips",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f),j.header="Active Trip",j.hasSubNavBar=!1,i=k))||i)),a("Trips",l)}}}),function(){var a=System.amdDefine;a("app/components/nav-bars/base.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/loader"></require><require from="app/components/back.html"></require><div class="navbar"><div class="navbar-inner"><div class="left"><span if.bind="onShowParty" class="ml10"><back title="Parties" action.call="navParties()"></back></span><span if.bind="onShowArchived" class="ml10"><back title="Trips" action.call="navTrips()"></back></span><span if.bind="onShowTripParty" class="ml10"><back title="Trip" action.call="navTrip()"></back></span><span if.bind="onShowTrip" class="ml10"><back title="Trips" action.call="navTrips()"></back></span></div><div class="center">${header}</div><div class="right"><loader class="mr20"></loader><a click.delegate="logout()" class="link logout-link pointer">Logout</a></div></div><div if.bind="hasSubNavBar" class="subnavbar"><div class="buttons-row"><a click.delegate="addResource()" if.bind="canAdd && !editable" class="button button-raised pointer">Add ${resourceName} </a><a click.delegate="startTrip()" if.bind="canStartTrip && !onShowParty && onParties" class="button button-raised pointer">Start Trip</a> <a click.delegate="startTrip()" if.bind="!canStartTrip && !onShowParty && onParties" class="button button-raised pointer" disabled="disabled">Start Trip</a> <a class="button button-raised pointer" click.delegate="editParty()" if.bind="canEdit && editable"><i class="f7-icons">compose</i></a> <a class="button button-raised pointer" if.bind="!canEdit && editable"><i class="f7-icons" disabled="disabled">compose</i></a> <a click.delegate="archiveParty()" class="button button-raised pointer" if.bind="canArchive && editable"><i class="f7-icons">delete_round</i></a> <a class="button button-raised pointer" if.bind="!canArchive && editable"><i class="f7-icons" disabled="disabled">delete_round</i></a></div></div></div></template>'})}(),System.register("app/components/nav-bars/parties.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("Parties",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.attached=function(){this.resourceName="Party"},b}(f),j.header="Parties",j.onParties=!0,j.addView="app/parties/add-party",j.startTripView="app/components/trips/confirm-start",j.addViewModel={},i=k))||i)),a("Parties",l)}}}),System.register("app/components/nav-bars/show-archived.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("ShowArchived",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.attached=function(){this.header="Party: "+this.appContext.selectedParty.paddedNumber},b.prototype.navTrips=function(){this.app.router.navigateToRoute("trips")},b}(f),j.header="Archived",j.onShowTrip=!0,j.hasSubNavBar=!1,i=k))||i)),a("ShowArchived",l)}}}),System.register("app/components/nav-bars/show-party.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("ShowParty",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.attached=function(){this.header="Party: "+this.appContext.selectedParty.paddedNumber},b.prototype.navParties=function(){this.app.router.navigateToRoute("parties")},b}(f),j.header="Party",j.editable=!0,j.onShowParty=!0,j.addView="app/parties/add-party",i=k))||i)),a("ShowParty",l)}}}),System.register("app/components/nav-bars/show-trip-party.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("ShowTripParty",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.attached=function(){this.header="Party: "+this.appContext.selectedParty.paddedNumber,this.onShowTripParty=!0},b.prototype.navTrip=function(){this.app.router.navigateToRoute("show-trip")},b}(f),j.header="",j.hasSubNavBar=!1,i=k))||i)),a("ShowTripParty",l)}}}),System.register("app/components/nav-bars/show-trip.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("ShowTrip",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.attached=function(){this.header="Trip: "+this.appContext.selectedTrip.paddedNumber},b.prototype.navTrips=function(){this.app.router.navigateToRoute("trips")},b}(f),j.header="Trip",j.onShowTrip=!0,j.hasSubNavBar=!1,i=k))||i)),a("ShowTrip",l)}}}),System.register("app/components/nav-bars/base.js",["app/auth-context","app/app-context","aurelia-framework","app/f7","app/notifier","app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){e=a.AuthContext},function(a){f=a.AppContext},function(a){g=a.computedFrom},function(a){h=a.f7},function(a){i=a.Notifier},function(a){j=a.App}],execute:function(){k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Base",(l=g("editable"),m=g("appContext.selectedRows.size"),n=g("editable"),o=function(){function a(b,d,e,f){c(this,a),this.authContext=b,this.header=this.constructor.header,this.appContext=d,this.notifier=e,this.app=f,this.hasSubNavBar=this.constructor.hasSubNavBar,void 0===this.hasSubNavBar&&(this.hasSubNavBar=!0),this.addViewModel=this.constructor.addViewModel,this.addView=this.constructor.addView,this.editable=this.constructor.editable||!1,this.onShowTrip=this.constructor.onShowTrip||!1,this.onShowParty=this.constructor.onShowParty||!1,this.onParties=this.constructor.onParties||!1,
this.startTripView=this.constructor.startTripView,this.f7=h}return a.inject=function(){return[e,f,i,j,h]},a.prototype.logout=function(){var a=this;this.f7.confirm("Are you sure you want to logout?","NPTS Shuttle",function(){a.app.actions.logout()},function(){})},a.prototype.addResource=function(){this.canAdd&&this.appContext.showPopup(this.addView,this.addViewModel)},a.prototype.startTrip=function(){this.canStartTrip&&this.appContext.showPopup(this.startTripView,{})},a.prototype.archiveParty=function(){var a=this;if(this.canArchive){var b="Are you sure you want to archive "+this.appContext.selectedParty.paddedNumber+" ?";h.confirm(b,"Archive Party",function(){a.appContext.partyController.actionTrigger["delete"](a.appContext.selectedParty)})}},a.prototype.editParty=function(){this.canEdit&&this.appContext.showPopup(this.addView,this.appContext.selectedParty)},k(a,[{key:"canEdit",get:function(){return this.editable}},{key:"canStartTrip",get:function(){return this.appContext.selectedRows&&this.appContext.selectedRows.size>0}},{key:"canArchive",get:function(){return this.editable}},{key:"canAdd",get:function(){return this.addView&&this.addViewModel}}]),a}(),d(o.prototype,"canEdit",[l],Object.getOwnPropertyDescriptor(o.prototype,"canEdit"),o.prototype),d(o.prototype,"canStartTrip",[m],Object.getOwnPropertyDescriptor(o.prototype,"canStartTrip"),o.prototype),d(o.prototype,"canArchive",[n],Object.getOwnPropertyDescriptor(o.prototype,"canArchive"),o.prototype),p=o)),a("Base",p)}}}),System.register("app/components/nav-bars/trips.js",["./base","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Base},function(a){g=a.useView}],execute:function(){a("Trips",(h=g("app/components/nav-bars/base.html"),l=h((k=j=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f),j.header="Trips",j.hasSubNavBar=!1,i=k))||i)),a("Trips",l)}}}),function(){var a=System.amdDefine;a("app/components/nav-bars/trips/show.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/converters/trip-number"></require><div class="navbar"><div class="navbar-inner"><div class="left sliding">Trip</div><div if.bind="currentTripNumber" class="center">${currentTripNumber | tripnumber}</div><div class="right"><a route-href="route: trips">Trips</a></div></div></div></template>'})}(),System.register("app/components/nav-bars/trips/show.js",["aurelia-framework","app/app-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j;return{setters:[function(a){e=a.computedFrom},function(a){f=a.AppContext}],execute:function(){g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Show",(h=e("appContext.currentTrip"),i=function(){function a(b){c(this,a),this.appContext=b}return a.inject=function(){return[f]},a.prototype.activate=function(a){console.log("trip id",a)},g(a,[{key:"currentTripNumber",get:function(){if(this.appContext.currentTrip)return this.appContext.currentTrip.tripNumber}}]),a}(),d(i.prototype,"currentTripNumber",[h],Object.getOwnPropertyDescriptor(i.prototype,"currentTripNumber"),i.prototype),j=i)),a("Show",j)}}}),function(){var a=System.amdDefine;a("app/components/nav-popup.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="heading, actions"><require from="app/components/back.html"></require><div class="navbar"><div class="navbar-inner"><div class="left"><back action.call="actions.closePopup()"></back></div><div class="center" style="left: 0px">${heading}</div><div class="right"></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/components/nselect.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><select value.bind="value"><option value="" if.bind="showEmpty">${emptyText}</option><option value="" if.bind="showBlank">${blankText}</option><option repeat.for="option of options" value="${val(option)}">${name(option)}</option></select></template>'})}(),System.register("app/components/nselect.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){f=a.bindable,g=a.bindingMode,h=a.computedFrom}],execute:function(){i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("NselectCustomElement",(j=f({defaultBindingMode:g.twoWay}),k=h("options","emptyText"),l=h("blankText"),m=function(){function a(){d(this,a),c(this,"accessor",n,this),c(this,"options",o,this),c(this,"emptyText",p,this),c(this,"blankText",q,this),c(this,"formControl",r,this),c(this,"value",s,this)}return a.prototype.val=function(a){return this.accessor?this.accessor.val(a):a.id||a.value||a},a.prototype.name=function(a){return this.accessor?this.accessor.name(a):a.name||a},i(a,[{key:"showEmpty",get:function(){if(this.options&&this.emptyText)return 0==this.options.length&&this.emptyText.length>0}},{key:"showBlank",get:function(){if(this.blankText)return this.blankText.length>0}}]),a}(),n=e(m.prototype,"accessor",[f],{enumerable:!0,initializer:null}),o=e(m.prototype,"options",[f],{enumerable:!0,initializer:null}),p=e(m.prototype,"emptyText",[f],{enumerable:!0,initializer:null}),q=e(m.prototype,"blankText",[f],{enumerable:!0,initializer:null}),r=e(m.prototype,"formControl",[f],{enumerable:!0,initializer:function(){return!0}}),s=e(m.prototype,"value",[j],{enumerable:!0,initializer:null}),e(m.prototype,"showEmpty",[k],Object.getOwnPropertyDescriptor(m.prototype,"showEmpty"),m.prototype),e(m.prototype,"showBlank",[l],Object.getOwnPropertyDescriptor(m.prototype,"showBlank"),m.prototype),t=m)),a("NselectCustomElement",t)}}}),function(){var a=System.amdDefine;a("app/components/parties/party-header.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="col-auto"></div><div class="col-auto pointer">Party #</div><div class="col-auto pointer">Status</div><div class="col-auto pointer">Pickup</div><div class="col-auto pointer">Destination</div><div class="col-auto pointer">Date</div><div class="col-auto pointer">Departure <i class="f7-icons size-14">time</i></div><div class="col-auto pointer">Arrival <i class="f7-icons size-14">time</i></div><div class="col-auto pointer">Contact #</div><div class="col-auto pointer">Party Name</div></template>'})}(),function(){var a=System.amdDefine;a("app/components/parties/party-list.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div id="parties" class="list-block media-list"><ul><li repeat.for="party of parties"><a class="item-link pointer item-content"><div class="item-media"><input id="${selectedId(party)}" type="checkbox" click.delegate="selectRow(party, $event)" checked.bind="rowChecked[party.id]"></div><div class="item-inner" click.delegate="showParty(party)"><div class="item-title-row"><div class="item-title">${party.partyName}</div><div class="item-after">Party of ${party.partySize}</div></div><div class="item-subtitle"><span class="${partyStatusClass(party)}">${party.paddedNumber}</span></div><div class="item-text"><div class="row"><p>${party.date} ${party.departure}</p><p>Pickup: ${party.pickup}</p></div></div></div></a></li></ul></div></template>'})}(),System.register("app/components/parties/party-list.js",["aurelia-framework","app/app-base","app/utils","app/models/party","app/utils/table"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o;return{setters:[function(a){h=a.bindable},function(a){i=a.AppBase},function(a){j=a.Utils},function(a){k=a.PartyModel},function(a){l=a.TableUtils}],execute:function(){a("PartyList",(m=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"parties",n,g),h=f,e(g,h)}return f(b,a),b.prototype.bind=function(){var a=this;this.selectedRows=new Map,this.rowChecked=[],this.selectedPartyActions={partySelected:function(b){return a.app.appContext.selectedRows=b,!0},partyDeleted:function(b){a.app.appContext.selectedParty=void 0,a.app.appContext.selectedRows["delete"](a.selectedId(b))}},this.selectedPartyActions.partySelected(this.selectedRows),this.app.appContext.selectedPartyActions=this.selectedPartyActions},b.prototype.selectedId=function(a){return"checkbox-"+a.id},b.prototype.partyStatusClass=function(a){var b="";switch(!0){case a.isLate:b="red";break;case a.isActive:b="green";break;case a.isReserved:b="yellow"}if(b.length)return"status "+b},b.prototype.showParty=function(a){this.app.appContext.selectedParty=a,this.app.router.navigateToRoute("show-party")},b.prototype.selectRow=function(a,b){var c=b.target;return c.checked===!0?this.selectedRows.set(c.id,a):this.selectedRows["delete"](c.id),this.selectedPartyActions.partySelected(this.selectedRows)},b}(i),n=g(m.prototype,"parties",[h],{enumerable:!0,initializer:null}),o=m)),a("PartyList",o)}}}),function(){var a=System.amdDefine;a("app/components/parties/party.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="party"><div class="col-auto">${party.paddedNumber}</div><div class="col-auto">${party.status}</div><div class="col-auto">${party.pickup}</div><div class="col-auto">${party.destination}</div><div class="col-auto">${party.date}</div><div class="col-auto">${party.departure}</div><div class="col-auto">${party.partySize}</div><div class="col-auto">${party.contactNumber}</div><div class="col-auto">${party.partyName}</div></template>'})}(),function(){var a=System.amdDefine;a("app/components/phone-number.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="aurelia-mask"></require><input type="tel" class="form-control" masked="value.bind: value; mask: (999) 999-9999; bind-masking: true"></template>'})}(),System.register("app/components/phone-number.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k;return{setters:[function(a){f=a.bindable,g=a.bindingMode}],execute:function(){a("PhoneNumberCustomElement",(h=f({defaultBindingMode:g.twoWay}),i=function b(){d(this,b),c(this,"value",j,this)},j=e(i.prototype,"value",[h],{enumerable:!0,initializer:null}),k=i)),a("PhoneNumberCustomElement",k)}}}),function(){var a=System.amdDefine;a("app/components/resource-table/actions-renderer.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><compose view-model.bind="view" model.bind="{row:row, actions:actions, actionTrigger: actionTrigger}" containerless></compose></template>'})}(),System.register("app/components/resource-table/actions-renderer.js",["aurelia-framework","app/loader"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){h=a.bindable,i=a.computedFrom},function(a){j=a.Loader}],execute:function(){a("ActionsRendererCustomElement",(k=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"row",l,g),c(g,"actionTrigger",m,g),c(g,"actions",n,g),c(g,"actionInProgress",o,g),c(g,"view",p,g),h=f,e(g,h)}return f(b,a),b}(j),l=g(k.prototype,"row",[h],{enumerable:!0,initializer:null}),m=g(k.prototype,"actionTrigger",[h],{enumerable:!0,initializer:null}),n=g(k.prototype,"actions",[h],{enumerable:!0,initializer:null}),o=g(k.prototype,"actionInProgress",[h],{enumerable:!0,initializer:null}),p=g(k.prototype,"view",[h],{enumerable:!0,initializer:null}),q=k)),a("ActionsRendererCustomElement",q)}}}),function(){var a=System.amdDefine;a("app/components/resource-table/actions/driver-trips.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><span class="p-r-1 action"><button disabled.bind="disabled" class="btn btn-primary-outline" click.delegate="startTrip()">Start Trip <i class="fa fa-2x fa-hourglass-start"></i></button></span></template>'})}(),System.register("app/components/trips/confirm-start.js",["app/bootstrap-dialog","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j;return{setters:[function(a){f=a.BootstrapDialog},function(a){g=a.inject,h=a.computedFrom}],execute:function(){i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ConfirmStart",j=function(a){function b(){c(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=d(this,a.call.apply(a,[this].concat(f)));return h.heading="Start Trip",h.message="Are you sure want to start the trip with these parties",h}return e(b,a),b.prototype.activate=function(a){var b=this,c=this.app.authContext.currentUser.locationId;return console.log("selected parties",this.app.appContext.selectedParties(),this.app.appContext.selectedRows),this.selectedPartyIds=this.app.appContext.selectedParties().map(function(a){return a.id}),this.app.api.getShuttlesAtLocation(c).then(function(a){b.shuttles=a})},b.prototype.submitSuccess=function(){var a=this;return function(){a.app.appContext.driverShuttleId!=a.driverShuttleId&&a.app.appContext.setCurrentDriverShuttleId(a.driverShuttleId),a.app.appContext.closePopup(),a.app.appContext.partyController.actionTrigger.startTrip()}},b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.driverShuttleId}).required()},i(b,[{key:"shuttlesAvailable",get:function(){return this.shuttles.length>0}}]),b}(f)),a("ConfirmStart",j)}}}),System.register("app/components/resource-table/actions/driver-trips.js",["../column","aurelia-framework","app/components/trips/confirm-start","app/app-context","app/utils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var g,h,i,j,k,l,m,n,o;return{setters:[function(a){g=a.Column},function(a){h=a.computedFrom},function(a){i=a.ConfirmStart},function(a){j=a.AppContext},function(a){k=a.Utils}],execute:function(){l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Driver",(m=h("appContext.resourceTableSelectedRow"),n=function(a){function b(e){c(this,b);for(var f=arguments.length,g=Array(f>1?f-1:0),h=1;h<f;h++)g[h-1]=arguments[h];var i=d(this,a.call.apply(a,[this].concat(g)));return i.appContext=e,i}return e(b,a),b.inject=function(){return[j]},b.prototype.startTrip=function(){var a=this;this.dialog.open({viewModel:i,model:this.appContext.resourceTableSelectedRow}).then(function(b){b.wasCancelled||a["do"]("startTrip")})},l(b,[{key:"disabled",get:function(){return k.isNullOrUndefined(this.appContext.resourceTableSelectedRow)}}]),b}(g),f(n.prototype,"disabled",[m],Object.getOwnPropertyDescriptor(n.prototype,"disabled"),n.prototype),o=n)),a("Driver",o)}}}),function(){var a=System.amdDefine;a("app/components/resource-table/column.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return"<template>${(accessors[prop] && accessors[prop](row)) || row[prop]}</template>"})}(),function(){var a=System.amdDefine;a("app/components/resource-table/password.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><button click.delegate="do(\'resetPassword\')" type="button" class="btn btn-outline-success">Reset Password</button></template>'})}(),System.register("app/components/resource-table/password.js",["./column"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Column}],execute:function(){a("Password",g=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f)),a("Password",g)}}}),function(){var a=System.amdDefine;a("app/components/resource-table/pin.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><button click.delegate="do(\'resetPin\')" type="button" class="btn btn-outline-success">Reset Pin</button></template>'})}(),System.register("app/components/resource-table/column.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.computedFrom}],execute:function(){a("Column",e=function(){function a(){c(this,a)}return a.prototype.activate=function(a){this.model=a},a.prototype["do"]=function(a){var b=this.model.actions,c=this.model.actionTrigger;c&&b&&b[a]&&c.trigger(b[a],this.model.row)},a}()),a("Column",e)}}}),System.register("app/components/resource-table/pin.js",["./column"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Column}],execute:function(){a("Pin",g=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f)),a("Pin",g)}}}),function(){var a=System.amdDefine;a("app/components/resource-table/tr-renderer.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><compose view-model.bind="view" model.bind="model"></compose></template>'})}(),System.register("app/components/resource-table/tr-renderer.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.bindable}],execute:function(){a("TrRendererCustomElement",(g=function(){function a(){d(this,a),c(this,"row",h,this),c(this,"prop",i,this),c(this,"accessors",j,this),c(this,"view",k,this),c(this,"actionTrigger",l,this),c(this,"actions",m,this),c(this,"actionInProgress",n,this)}return a.prototype.bind=function(){this.model={row:this.row,prop:this.prop,accessors:this.accessors,actions:this.actions,actionTrigger:this.actionTrigger}},a}(),h=e(g.prototype,"row",[f],{enumerable:!0,initializer:null}),i=e(g.prototype,"prop",[f],{enumerable:!0,initializer:null}),j=e(g.prototype,"accessors",[f],{enumerable:!0,initializer:null}),k=e(g.prototype,"view",[f],{enumerable:!0,initializer:null}),l=e(g.prototype,"actionTrigger",[f],{enumerable:!0,initializer:null}),m=e(g.prototype,"actions",[f],{enumerable:!0,initializer:null}),n=e(g.prototype,"actionInProgress",[f],{enumerable:!0,initializer:null}),o=g)),a("TrRendererCustomElement",o)}}}),function(){var a=System.amdDefine;a("app/components/submit.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/loader"></require><div class="submit"><a click.delegate="submit()" class="button button-raised button-round">${text}</a><center><loader></loader></center></div></template>'})}(),System.register("app/components/submit.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i;return{setters:[function(a){f=a.bindable}],execute:function(){a("SubmitCustomElement",(g=function(){function a(){d(this,a),c(this,"text",h,this)}return a.prototype.bind=function(a){this.$parent=a},a.prototype.submit=function(){this.$parent.submit()},a}(),h=e(g.prototype,"text",[f],{enumerable:!0,initializer:function(){return"Submit"}}),i=g)),a("SubmitCustomElement",i)}}}),function(){var a=System.amdDefine;a("app/components/third-party/numeric-input.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><input type="text" class="form-control" value.bind="value" placeholder.bind="placeholder"></template>'})}(),System.register("app/components/third-party/numeric-input.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function f(a){return[46,8,9,27,13,110,190].indexOf(a.keyCode)!==-1||[65,67,86,88].indexOf(a.keyCode)!==-1&&(a.ctrlKey===!0||a.metaKey===!0)||a.keyCode>=35&&a.keyCode<=40}function g(a){f(a)||(a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)&&a.preventDefault()}var h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){h=a.inject,i=a.bindable,j=a.bindingMode}],execute:function(){a("NumericInputCustomElement",(k=h(Element),l=i({defaultBindingMode:j.twoWay}),q=k((n=function(){function a(b){d(this,a),c(this,"value",o,this),c(this,"placeholder",p,this),this.element=b}return a.prototype.attached=function(){this.element.addEventListener("keydown",g)},a.prototype.detached=function(){this.element.removeEventListener("keydown",g)},a}(),o=e(n.prototype,"value",[l],{enumerable:!0,initializer:null}),p=e(n.prototype,"placeholder",[i],{enumerable:!0,initializer:function(){return""}}),m=n))||m)),a("NumericInputCustomElement",q)}}}),function(){var a=System.amdDefine;a("app/components/tool-bar.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="toolbar tabbar toolbar-bottom"><div class="toolbar-inner"><a click.delegate="navParties()" class="pointer tab-link ${page == \'parties\' ? \'active\': \'\'}"><span class="tabbar-label">Parties</span> </a><a click.delegate="navTrips()" ref="tabTrips" class="pointer tab-link ${page == \'trips\' ? \'active\': \'\'}"><span class="tabbar-label">Trips</span></a></div></div></template>'})}(),System.register("app/components/tool-bar.js",["app/app-base","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l;return{setters:[function(a){h=a.AppBase},function(a){i=a.bindable}],execute:function(){a("ToolBar",(j=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),l=0;l<i;l++)j[l]=arguments[l];
return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"page",k,g),h=f,e(g,h)}return f(b,a),b.prototype.navParties=function(){this.app.router.navigateToRoute("parties")},b.prototype.navTrips=function(){this.app.router.navigateToRoute("trips")},b}(h),k=g(j.prototype,"page",[i],{enumerable:!0,initializer:null}),l=j)),a("ToolBar",l)}}}),System.register("app/components/trips/confirm-dialog.js",["app/components/dialog","app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.Dialog},function(a){g=a.App}],execute:function(){a("ConfirmDialog",h=function(a){function b(e){c(this,b);for(var f=arguments.length,g=Array(f>1?f-1:0),h=1;h<f;h++)g[h-1]=arguments[h];var i=d(this,a.call.apply(a,[this].concat(g)));return i.app=e,i}return e(b,a),b.inject=function(){return[g]},b}(f)),a("ConfirmDialog",h)}}}),function(){var a=System.amdDefine;a("app/components/trips/confirm-end.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="./parties"></require><require from="app/components/cselect"></require><require from="app/components/trips/other-location"></require><require from="app/components/nav-popup.html"></require><nav-popup heading="${heading}" actions.bind="actions"></nav-popup><center id="confirm-end"><p class="label">${message}?</p><div class="content-block"><parties if.bind="selectedParties.length" parties.bind="selectedParties" selected.bind="selectedPartyIds" value.bind="app.appContext.endTripPartyIds"></parties></div><p class="label">Confirm End Location</p><div class="content-block"><cselect title="Location" empty-text="No locations available" options.bind="locations" value.bind="trip.destination"></cselect></div><div class="content-block"><div class="row"><div class="col-auto"><other-location other.bind="other"></other-location></div></div></div><div class="content-block"><p class="label color-green">Destination: ${trip.destination}</p><div class="content-block"><div class="row"><div class="col-auto"><a click.delegate="submit()" class="button button-raised button-round">Ok</a></div></div></div></div></center></template>'})}(),System.register("app/components/trips/confirm-end.js",["app/bootstrap-dialog","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o;return{setters:[function(a){h=a.BootstrapDialog},function(a){i=a.bindable,j=a.computedFrom}],execute:function(){k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ConfirmEnd",(l=j("app.appContext.locations"),m=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];return f=g=e(this,a.call.apply(a,[this].concat(j))),g.heading="End Trip",c(g,"other",n,g),h=f,e(g,h)}return f(b,a),b.prototype.activate=function(a){var b=this;this.trip=a.model,this.selectedPartyIds=this.app.appContext.tripPartyIds(),this.selectedParties=this.app.appContext.reservedActiveParties.filter(function(a){return b.selectedPartyIds.includes(a.id)});var c="with these";0==this.selectedParties.length&&(c="without any"),this.message="Are you sure want to end the trip "+c+" parties"},b.prototype.otherChanged=function(){this.other.length>0&&(this.trip.destination=this.other)},b.prototype.cancel=function(){this.closeDialog()},b.prototype.submit=function(){this.app.appContext.endTrip=!0,this.closeDialog()},b.prototype.setDestination=function(a){this.trip.destination=a.target.innerHTML},k(b,[{key:"locations",get:function(){return this.app.appContext.locations.map(function(a){return a.name})}}]),b}(h),g(m.prototype,"locations",[l],Object.getOwnPropertyDescriptor(m.prototype,"locations"),m.prototype),n=g(m.prototype,"other",[i],{enumerable:!0,initializer:null}),o=m)),a("ConfirmEnd",o)}}}),function(){var a=System.amdDefine;a("app/components/trips/confirm-start.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/cselect"></require><require from="./parties"></require><require from="app/components/nav-popup.html"></require><nav-popup heading="${heading}" actions.bind="actions"></nav-popup><div class="content-block text-center color-red" if.bind="!shuttlesAvailable"><p>Sorry you cannot start the trip, no shuttles are available at your location.</p></div><div if.bind="!shuttlesAvailable"><div class="text-center"><a click.delegate="closeDialog()" class="button button-raised">Ok</a></div></div><form id="confirm-start" role="form" submit.delegate="submit()" if.bind="shuttlesAvailable"><center><p class="label">${message}?</p><div class="content-block"><parties parties.bind="app.appContext.reservedActiveParties" selected.bind="selectedPartyIds" value.bind="app.appContext.startTripPartyIds"></parties></div><div class="content-block"><cselect title="Shuttle" empty-text="No shuttles available at your location" options.bind="shuttles" blank-text="Select" value.bind="driverShuttleId & validate"></cselect></div><div class="content-block"><div class="row"><div class="col-auto"><a click.delegate="submit()" class="button button-raised">Ok</a></div></div></div></center></form></template>'})}(),function(){var a=System.amdDefine;a("app/components/trips/other-location.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><a class="button button-raised other destination" click.delegate="enableInputMode()" if.bind="!inputMode">Other</a> <input if.bind="inputMode" type="text" value.bind="other"></template>'})}(),System.register("app/components/trips/other-location.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k;return{setters:[function(a){f=a.bindable,g=a.bindingMode}],execute:function(){a("OtherLocationCustomElement",(h=f({defaultBindingMode:g.twoWay}),i=function(){function a(){d(this,a),c(this,"other",j,this),this.inputMode=!1}return a.prototype.enableInputMode=function(){this.inputMode=!0},a}(),j=e(i.prototype,"other",[h],{enumerable:!0,initializer:null}),k=i)),a("OtherLocationCustomElement",k)}}}),function(){var a=System.amdDefine;a("app/components/trips/parties.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="label" repeat.for="party of selectedParties">${party.display()}</div></template>'})}(),System.register("app/components/trips/parties.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a.bindable,g=a.bindingMode,h=a.computedFrom}],execute:function(){a("PartiesCustomElement",(i=f({defaultBindingMode:g.twoWay}),j=function(){function a(){d(this,a),c(this,"parties",k,this),c(this,"selected",l,this),c(this,"value",m,this)}return a.prototype.attached=function(){var a=this;this.value=this.selected,this.selectedParties=this.parties.filter(function(b){return a.selected.includes(b.id)})},a}(),k=e(j.prototype,"parties",[f],{enumerable:!0,initializer:null}),l=e(j.prototype,"selected",[f],{enumerable:!0,initializer:null}),m=e(j.prototype,"value",[i],{enumerable:!0,initializer:null}),n=j)),a("PartiesCustomElement",n)}}}),function(){var a=System.amdDefine;a("app/components/trips/party-header.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="col-auto">Party #</div><div class="col-auto">Status</div><div class="col-auto">Pickup</div><div class="col-auto">Destination</div><div class="col-auto">Date</div><div class="col-auto">Departure <i class="f7-icons size-14">time</i></div><div class="col-auto">Arrival <i class="f7-icons size-14">time</i></div><div class="col-auto">Contact #</div><div class="col-auto">Room #</div></template>'})}(),function(){var a=System.amdDefine;a("app/components/trips/party.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="party"><a class="item-link pointer item-content"><div class="item-inner" click.delegate="showArchived(party)"><div class="item-title-row"><div class="item-title">${party.paddedNumber}</div><div class="item-after">${party.partySize}</div></div><div class="item-subtitle">${party.partyName}</div><div class="item-text"><div class="row"><p>${party.date} ${party.departure}</p><p>Pickup: ${party.pickup}</p></div></div></div></a></template>'})}(),System.register("app/components/trips/party.js",["app/app-base","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l;return{setters:[function(a){h=a.AppBase},function(a){i=a.bindable}],execute:function(){a("Party",(j=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),l=0;l<i;l++)j[l]=arguments[l];return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"party",k,g),h=f,e(g,h)}return f(b,a),b.prototype.showArchived=function(a){this.app.appContext.selectedParty=a,this.app.router.navigateToRoute("show-archived")},b}(h),k=g(j.prototype,"party",[i],{enumerable:!0,initializer:null}),l=j)),a("Party",l)}}}),function(){var a=System.amdDefine;a("app/components/trips/trip-add-party.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/cselect"></require><require from="app/components/nav-popup.html"></require><nav-popup heading="${heading}" actions.bind="actions"></nav-popup><form role="form" submit.delegate="submit()"><div class="content-block"><cselect title="Party" value.bind="partyToAdd & validate" options.bind="availableParties" blank-text="Choose Party To Add"></cselect></div><div class="content-block"><div class="row text-center"><div class="col-auto"><a click.delegate="submit()" class="button button-raised">Ok</a></div></div></div></form></template>'})}(),System.register("app/bootstrap.js",["aurelia-framework","app/bootstrap-form","app/notifier","app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l;return{setters:[function(a){d=a.inject,e=a.bindable},function(a){f=a.BootstrapForm},function(a){g=a.Notifier},function(a){h=a.App}],execute:function(){a("Bootstrap",(i=e("actions"),j=d(f,g,h),l=i(k=j(k=function(){function a(b,d,e){var f=this;c(this,a),this.bootstrapForm=b,this.notifier=d,this.app=e,this.bootstrapForm.configureFormValidationRules(this,function(a){return f.formValidationRules(a)})}return a.prototype.formValidationRules=function(a){},a.prototype.submit=function(){var a=this,b=function(){return a.actions.success(a)},c=this.submitSuccess()||b,d=function(b){b.forEach(function(b){a.notifier.formError(b)})},e=this.submitError||d;this.bootstrapForm.validateSubmit(c,e)},a}())||k)||k)),a("Bootstrap",l)}}}),System.register("app/bootstrap-dialog.js",["app/bootstrap"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Bootstrap}],execute:function(){a("BootstrapDialog",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.actions={closePopup:function(){return f.closeDialog()}},g=e,d(f,g)}return e(b,a),b.prototype.closeDialog=function(){this.app.appContext.closePopup()},b}(f)),a("BootstrapDialog",g)}}}),System.register("app/components/trips/trip-add-party.js",["app/bootstrap-dialog","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.BootstrapDialog},function(a){g=a.inject}],execute:function(){a("TripAddParty",h=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.heading="Add Party To Trip",g=e,d(f,g)}return e(b,a),b.prototype.activate=function(){var a=this.app.appContext.tripPartyIds();this.availableParties=this.app.appContext.reservedActiveParties.filter(function(b){return!a.includes(b.id)}).map(function(a){var b=a.paddedNumber+": "+a.partyName+" Party of "+a.partySize;return{id:a.id,name:b}})},b.prototype.submitSuccess=function(){var a=this;return function(){a.app.appContext.midTripPartyIds.push(a.partyToAdd),a.closeDialog()}},b.prototype.formValidationRules=function(a){return a.ensure(function(a){return a.partyToAdd}).required()},b}(f)),a("TripAddParty",h)}}}),function(){var a=System.amdDefine;a("app/components/trips/trip-duration.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/converters/duration"></require>${value | duration}</template>'})}(),System.register("app/components/trips/trip-duration.js",["moment","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j;return{setters:[function(a){f=a["default"]},function(a){g=a.bindable}],execute:function(){a("TripDuration",(h=function(){function a(){d(this,a),c(this,"startTime",i,this)}return a.prototype.attached=function(){var a=this;this.unixStartTime=f.unix(this.startTime),this.update(),setInterval(function(){return a.update()},1e3)},a.prototype.update=function(){var a=f().unix();this.value=f.unix(a).diff(this.unixStartTime,"seconds")},a}(),i=e(h.prototype,"startTime",[g],{enumerable:!0,initializer:null}),j=h)),a("TripDuration",j)}}}),function(){var a=System.amdDefine;a("app/components/trips/trip-header.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="col-auto">Trip #</div><div class="col-auto">Status</div><div class="col-auto">Pickup</div><div class="col-auto">Destination</div><div class="col-auto">Date</div><div class="col-auto">Departure <i class="f7-icons size-14">time</i></div><div class="col-auto">Arrival <i class="f7-icons size-14">time</i></div><div class="col-auto"># in Party</div></template>'})}(),function(){var a=System.amdDefine;a("app/components/trips/trip-list.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template bindable="list, isA"><require from="app/components/trips/trip"></require><require from="app/components/trips/party"></require><div id="trips" class="list-block media-list"><ul><li repeat.for="item of list"><trip trip.bind="item" if.bind="isA.isTrip(item)" containerless></trip><party party.bind="item" if.bind="isA.isParty(item)" containerless></party></li></ul></div></template>'})}(),function(){var a=System.amdDefine;a("app/components/trips/trip.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><a class="item-link pointer item-content"><div class="item-inner" click.delegate="showTrip(trip)"><div class="item-title-row"><div class="item-title">${trip.paddedNumber}</div><div class="item-after">${trip.status}</div></div><div class="item-subtitle">${trip.destination}</div><div class="item-text"><div class="row"><p>Departure: ${trip.date} ${trip.departure}</p><p if.bind="trip.arrival">Arrival: ${trip.arrival}</p></div></div></div></a></template>'})}(),System.register("app/components/trips/trip.js",["app/app-base","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l;return{setters:[function(a){h=a.AppBase},function(a){i=a.bindable}],execute:function(){a("Trip",(j=function(a){function b(){var f,g,h;d(this,b);for(var i=arguments.length,j=Array(i),l=0;l<i;l++)j[l]=arguments[l];return f=g=e(this,a.call.apply(a,[this].concat(j))),c(g,"trip",k,g),h=f,e(g,h)}return f(b,a),b.prototype.showTrip=function(a){this.app.appContext.selectedTrip=a,this.app.router.navigateToRoute("show-trip")},b}(h),k=g(j.prototype,"trip",[i],{enumerable:!0,initializer:null}),l=j)),a("Trip",l)}}}),function(){var a=System.amdDefine;a("app/components/zip-code.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="aurelia-mask"></require><input type="text" class="form-control" masked="value.bind: value; mask: 99999;"></template>'})}(),System.register("app/components/zip-code.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k;return{setters:[function(a){f=a.bindable,g=a.bindingMode}],execute:function(){a("ZipCodeCustomElement",(h=f({defaultBindingMode:g.twoWay}),i=function b(){d(this,b),c(this,"value",j,this)},j=e(i.prototype,"value",[h],{enumerable:!0,initializer:null}),k=i)),a("ZipCodeCustomElement",k)}}}),System.register("app/converters/admin-filter.js",["aurelia-framework","app/auth-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.AuthContext}],execute:function(){a("AdminFilterValueConverter",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.authContext=b}return a.prototype.toView=function(a){var b=this;return a.filter(function(a){var c=a.config.settings;return!c||"Admin"!=c.role||b.authContext.isAdmin()})},a}())||g)),a("AdminFilterValueConverter",h)}}}),System.register("app/converters/am-pm.js",["moment"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a["default"]}],execute:function(){a("AmpmValueConverter",e=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return console.log("am pm",a),d(a).format("h:mm:ss a")},a}()),a("AmpmValueConverter",e)}}}),System.register("app/converters/collapse-filter.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("CollapseFilterValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return a.filter(function(a){var b=a.config.settings;return!b||!b.notCollapsed})},a}()),a("CollapseFilterValueConverter",d)}}}),System.register("app/converters/duration.js",["moment","pad-number"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a["default"]},function(a){e=a["default"]}],execute:function(){a("DurationValueConverter",f=function(){function a(){c(this,a)}return a.prototype.toView=function(a){var b=d.duration(a,"seconds"),c=e(b.minutes(),2),f=e(b.seconds(),2),g=e(b.hours(),2);return 0==b.hours()?c+":"+f:g+":"+c+":"+f},a}()),a("DurationValueConverter",f)}}}),System.register("app/converters/initials.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("InitialsValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return a.split(" ").map(function(a){return a[0]}).join("")},a}()),a("InitialsValueConverter",d)}}}),System.register("app/converters/not-collapsed-filter.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("NotCollapsedFilterValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return a.filter(function(a){var b=a.config.settings;return!(!b||!b.notCollapsed)})},a}()),a("NotCollapsedFilterValueConverter",d)}}}),System.register("app/converters/password-filter.js",[],function(a,b){"use strict";return{setters:[],execute:function(){}}}),System.register("app/converters/trip-number.js",["pad-number"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a["default"]}],execute:function(){a("TripnumberValueConverter",e=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return"T-"+d(a,4)},a}()),a("TripnumberValueConverter",e)}}}),System.register("app/converters/trips-filter.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("TripsFilterValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a,b){},a}()),a("TripsFilterValueConverter",d)}}}),function(){var a=System.amdDefine;a("app/location-not-found.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="content-block-title color-red">Uh-oh</div><div class="content-block"><div class="content-block-inner"><p>Your location information is not valid.</p><p>Please make sure you location setting is valid and try again.</p></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/main-view.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/nav-bar"></require><require from="app/components/tool-bar"></require><div class="views"><div class="view view-main"><nav-bar if.bind="currentPage && !appContext.isAndroid" page.bind="currentPage"></nav-bar><div class="pages navbar-fixed toolbar-through"><div data-page="index" class="page"><nav-bar if.bind="currentPage && appContext.isAndroid" page.bind="currentPage"></nav-bar><tool-bar if.bind="currentPageName && appContext.isAndroid" page.bind="currentPageName" containerless></tool-bar><div class="page-content ${currentPageClass} text-normal"><router-view></router-view></div></div></div><tool-bar if.bind="currentPageName && !appContext.isAndroid" page.bind="currentPageName" containerless></tool-bar></div></div></template>'})}(),System.register("app/main-view.js",["aurelia-framework","app/app-context"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.bindable,g=a.computedFrom},function(a){h=a.AppContext}],execute:function(){i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("MainView",(j=g("router.currentInstruction.config.moduleId"),k=g("currentPageName"),l=g("router.currentInstruction"),m=function(){function a(b){d(this,a),c(this,"router",n,this),this.appContext=b}return a.inject=function(){return[h]},i(a,[{key:"currentPage",get:function(){var a=this.router.currentInstruction;if(a)return a.config.moduleId}},{key:"currentPageClass",get:function(){return this.currentPageName}},{key:"currentPageName",get:function(){var a=this.router.currentInstruction;if(a)return a.config.name}}]),a}(),n=e(m.prototype,"router",[f],{enumerable:!0,initializer:null}),e(m.prototype,"currentPage",[j],Object.getOwnPropertyDescriptor(m.prototype,"currentPage"),m.prototype),e(m.prototype,"currentPageClass",[k],Object.getOwnPropertyDescriptor(m.prototype,"currentPageClass"),m.prototype),e(m.prototype,"currentPageName",[l],Object.getOwnPropertyDescriptor(m.prototype,"currentPageName"),m.prototype),o=m)),a("MainView",o)}}}),function(){var a=System.amdDefine;a("app/n-popup.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div id="npopup" class="popup npopup tablet-fullscreen"><div class="view popup-view text-normal"><compose if.bind="canShowNPopup" view-model.bind="view" model.bind="model"></compose></div></div></template>'})}(),System.register("app/n-popup.js",["aurelia-framework","app/app-base"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var g,h,i,j,k,l,m,n;return{setters:[function(a){g=a.computedFrom},function(a){h=a.AppBase}],execute:function(){i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("NPopup",(j=g("app.appContext.nPopupView"),k=g("app.appContext.canShowNPopup"),l=g("appContext.nPopupModel"),m=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),i(b,[{key:"view",get:function(){return this.app.appContext.nPopupView}},{key:"canShowNPopup",get:function(){return this.app.appContext.canShowNPopup}},{key:"model",get:function(){return this.app.appContext.nPopupModel}}]),b}(h),f(m.prototype,"view",[j],Object.getOwnPropertyDescriptor(m.prototype,"view"),m.prototype),f(m.prototype,"canShowNPopup",[k],Object.getOwnPropertyDescriptor(m.prototype,"canShowNPopup"),m.prototype),f(m.prototype,"model",[l],Object.getOwnPropertyDescriptor(m.prototype,"model"),m.prototype),n=m)),a("NPopup",n)}}}),function(){var a=System.amdDefine;a("app/not-found.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div class="content-block-title color-red">Uh-oh</div><div class="content-block"><div class="content-block-inner"><p class="text-xs-center">It looks like you have taken a wrong turn</p><p class="text-xs-center">Take a few deep breaths and <a route-href="route: trips">start</a> again.</p></div></div></template>'})}(),System.register("app/not-found.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("NotFound",d=function b(){c(this,b)}),a("NotFound",d)}}}),function(){var a=System.amdDefine;a("app/parties.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/parties/party-list"></require><div if.bind="app.authContext.hasLocation"><party-list parties.bind="parties" containerless></party-list></div></template>'})}(),System.register("app/bootstrap-form.js",["aurelia-validation","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.ValidationControllerFactory,e=a.ValidationController,f=a.ValidationRules},function(a){g=a.inject,h=a.NewInstance}],execute:function(){a("BootstrapForm",(i=g(h.of(e)),k=i(j=function(){function a(b){c(this,a),this.controller=b}return a.prototype.validationRules=function(){return f},a.prototype.configureFormValidationRules=function(a,b){var c=b(this.validationRules());return c&&c.on(a),c},a.prototype.validateSubmit=function(a,b){return this.controller.validate().then(function(c){return 0==c.length?a():void b(c)})},a}())||j)),a("BootstrapForm",k)}}}),System.register("app/resource-dialog-form.js",["app/resource-dialog","aurelia-framework","app/bootstrap-form","aurelia-validation","app/utils","app/stores","app/app","app/collection"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){f=a.ResourceDialog},function(a){g=a.inject},function(a){h=a.BootstrapForm},function(a){i=a.ValidationRules},function(a){j=a.Utils},function(a){k=a.Stores},function(a){l=a.App},function(a){m=a.Collection}],execute:function(){p=function(a){var b=this,c=function(a){a.forEach(function(a){b.app.notifier.formError(a)})};this.bootstrapForm.validateSubmit(function(){return Promise.resolve(a()).then(function(){b.app.appContext.closePopup()})["catch"](function(a){b.app.notifier.danger(a)})},c)},a("ResourceDialogForm",(n=g(h,k,l),q=n(o=function(a){function b(e,f,g){c(this,b);for(var h=arguments.length,i=Array(h>3?h-3:0),j=3;j<h;j++)i[j-3]=arguments[j];var k=d(this,a.call.apply(a,[this].concat(i)));return k.bootstrapForm=e,k.stores=f,k.app=g,k.collection=m,k.store=f.get(k.resourceName()),k.bootstrapForm.configureFormValidationRules(k,function(a){return k.validationRules=k.formValidationRules(a),k.validationRules}),k}return e(b,a),b.prototype.initFromModel=function(a){var b=this;this.id=a.id,j.forEachModelProp(this.resourceModel(),function(c){j.isNullOrUndefined(a[c])||(b[c]=a[c])})},b.prototype.activate=function(a){this.options=a;var b=this.resourceModel(),c=new b(a.model);this.editMode=!c.isNew(),this.editMode&&(this.heading="Edit "+j.capitalize(this.resourceName())),this.initFromModel(a.model)},b.prototype.formValidationRules=function(a){},b.prototype.addItemSubmit=function(){var a=this;console.log("adding item!!!!"),p.call(this,function(){return a.store.addItem(a.toModel())})},b.prototype.editItemSubmit=function(){var a=this;p.call(this,function(){return a.store.updateItem(Object.assign(a.toModel(),{id:a.id}))})},b.prototype.disableValidationRules=function(){this.bootstrapForm.validationRules().off(this)},b.prototype.enableValidationRules=function(){this.validationRules.on(this)},b.prototype.submit=function(){console.log("submitting form!!!!!!"),this.editMode?this.editItemSubmit():this.addItemSubmit()},b}(f))||o)),a("ResourceDialogForm",q)}}}),System.register("app/parties/add-party.js",["app/resource-dialog-form"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j;return{setters:[function(a){f=a.ResourceDialogForm}],execute:function(){g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("AddParty",(i=h=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.heading="Add Party",f.partySize=1,g=e,d(f,g)}return e(b,a),b.prototype.validatesPickupDestination=function(a){if(a)return a!=this.pickup},b.prototype.formValidationRules=function(a){var b=this;return a.ensure(function(a){return a.partyName}).required().ensure(function(a){return a.departureTime}).required().ensure(function(a){return a.pickup}).required().ensure(function(a){return a.destination}).required().satisfies(function(a){return a!=b.pickup}).withMessage("Destination must be different from pickup").when(function(a){return a.destination.length>0}).ensure(function(a){return a.contactNumber}).satisfiesRule("phoneLength").ensure(function(a){return a.email}).email().when(function(a){return void 0!==a.email&&a.email.length>0}).ensure(function(a){return a.partySize}).satisfiesRule("positiveInteger")},g(b,[{key:"locationValid",get:function(){return this.app.authContext.hasLocation()}}]),b}(f),h.dialogResourceName="party",j=i)),a("AddParty",j)}}}),System.register("app/parties.js",["aurelia-framework","app/add-resource-dialog","app/parties/add-party","app/auth-context","app/utils","app/app"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){h=a.bindable},function(a){i=a.AddResourceDialog},function(a){j=a.AddParty},function(a){k=a.AuthContext},function(a){l=a.Utils},function(a){m=a.App}],execute:function(){a("Parties",(q=p=function(a){function b(f,g){d(this,b);for(var h=arguments.length,i=Array(h>2?h-2:0),j=2;j<h;j++)i[j-2]=arguments[j];var k=e(this,a.call.apply(a,[this].concat(i)));return k.actionTriggers={startTrip:function(){var a=k.app.appContext.selectedParties()[0];k.getApi().startTrip(k.driverId,a.departureTime,a.pickup,a.destination,k.app.appContext.driverShuttleId).then(function(a){k.app.router.navigateToRoute("active-trip").then(function(){return k.actionSuccess("Trip started successfully.")})})["catch"](function(a){return k.actionError(a)})}},c(k,"parties",o,k),k.updateRowClass={update:function(a,b){b(k.selectRowClass(a))}},k.authContext=f,k.app=g,k.initActionTrigger(),k}return f(b,a),b.inject=function(){return[k,m]},b.prototype.actionSuccess=function(a){this.api.notifier.success(a)},b.prototype.actionError=function(a){this.api.notifier.danger(a)},b.prototype.activate=function(){var a=this;this.addStoreSubscriptions(),this.app.appContext.partyController=this,this.app.appContext.selectedRows=[];var b=this.authContext.isDriver();return b&&(this.driverId=this.authContext.currentUser.id,this.actionView="app/components/resource-table/actions/driver-trips"),this.app.appContext.loadLocations().then(function(){return a.app.appContext.loadReservedActiveParties(a).then(function(){return a.parties=a.reservedActiveParties})})},b.prototype.deactivate=function(){this.removeStoreSubscriptions()},b}(i),p.dialogResourceName="party",n=q,o=g(n.prototype,"parties",[h],{enumerable:!0,initializer:function(){return[]}}),r=n)),a("Parties",r)}}}),function(){var a=System.amdDefine;a("app/parties/add-party.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/trips/pickup-destination"></require><require from="app/components/date-time-picker"></require><require from="app/components/phone-number"></require><require from="app/components/form-element.html"></require><require from="app/components/third-party/numeric-input"></require><require from="app/components/nav-popup.html"></require><require from="app/location-not-found.html"></require><location-not-found if.bind="!locationValid"></location-not-found><div class="actions content-block" if.bind="!locationValid"><div class="text-center"><a click.delegate="closeDialog()" class="button button-raised">Ok</a></div></div><nav-popup heading="${heading}" actions.bind="actions"></nav-popup><div class="content-block" if.bind="locationValid"><form id="add-party" role="form" submit.delegate="submit()"><pickup-destination hotel="${app.authContext.currentLocation()}" from.bind="pickup & validate" to.bind="destination & validate"></pickup-destination><date-time-picker value.bind="departureTime & validate">></date-time-picker><div class="list-block"><ul class="no-top-border"><form-element label="Party Name" containerless><input value.bind="partyName & validate" type="text"></form-element><form-element label="Party Size" containerless><numeric-input id="party-size" value.bind="partySize & validate"></numeric-input></form-element><form-element label="Contact #" containerless><phone-number id="contact-number" value.bind="contactNumber & validate"></phone-number></form-element><form-element label="Room #" containerless><numeric-input id="room-number" value.bind="roomNumber"></numeric-input></form-element><form-element label="Email" containerless><input class="form-control" id="email" type="email" value.bind="email & validate"></form-element><form-element label="Trip Notes" containerless><textarea value.bind="tripNotes & validate" rows="3"></textarea></form-element></ul></div><div class="content-block"><div class="row"><div class="col-auto"><a click.delegate="submit()" class="button button-raised">Ok</a></div></div></div></form></div></template>'})}(),function(){var a=System.amdDefine;a("app/popup.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div id="popup" class="popup tablet-fullscreen"><div class="view popup-view text-normal"><compose if.bind="canShowPopup" view-model.bind="view" model.bind="{model: model, actions:actions}"></compose></div></div></template>'})}(),System.register("app/popup.js",["aurelia-framework","app/app-base"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var g,h,i,j,k,l,m,n;return{setters:[function(a){g=a.computedFrom},function(a){h=a.AppBase}],execute:function(){i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Popup",(j=g("app.appContext.popupView"),k=g("app.appContext.canShowPopup"),l=g("appContext.popupModel"),m=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.actions={close:function(){f.app.appContext.closePopup()}},g=e,d(f,g)}return e(b,a),i(b,[{key:"view",get:function(){return this.app.appContext.popupView}},{key:"canShowPopup",get:function(){return this.app.appContext.canShowPopup}},{key:"model",get:function(){return this.app.appContext.popupModel}}]),b}(h),f(m.prototype,"view",[j],Object.getOwnPropertyDescriptor(m.prototype,"view"),m.prototype),f(m.prototype,"canShowPopup",[k],Object.getOwnPropertyDescriptor(m.prototype,"canShowPopup"),m.prototype),f(m.prototype,"model",[l],Object.getOwnPropertyDescriptor(m.prototype,"model"),m.prototype),n=m)),a("Popup",n)}}}),function(){var a=System.amdDefine;a("app/show-archived.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div if.bind="app.appContext.selectedParty" class="card"><div class="card-header"><span>${app.appContext.selectedParty.paddedNumber}</span></div><div class="card-content"><div class="list-block"><ul><li class="item-content" repeat.for="header of headers"><div class="item-inner"><div class="item-title">${header}</div><div class="item-after">${headerVal($index)}</div></div></li></ul></div></div></div></template>'})}(),function(){var a=System.amdDefine;a("app/show-party.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div if.bind="app.appContext.selectedParty" class="card"><div class="card-header"><span>${app.appContext.selectedParty.paddedNumber}</span></div><div class="card-content"><div class="list-block"><ul><li class="item-content" repeat.for="header of headers"><div class="item-inner"><div class="item-title">${header}</div><div class="item-after">${headerVals[props[$index]]}</div></div></li></ul></div></div></div></template>'})}(),System.register("app/resource-dialog.js",["aurelia-framework","app/models","app/utils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.inject},function(a){e=a.Models},function(a){f=a.Utils}],execute:function(){a("ResourceDialog",g=function(){function a(){var b=this;c(this,a),this.staticMode=!1,this.actions={closePopup:function(){return b.closeDialog()}},this.dialogInit()}return a.prototype.viewModel=function(){return this.staticMode?this.dialogStaticViewModel:this.dialogViewModel},a.prototype.closeDialog=function(){this.app.appContext.closePopup()},a.prototype.dialogOpenStatic=function(a){this.staticMode=!0,this.dialogOpen(a)},a.prototype.dialogInit=function(){},a.prototype.dialogOpenEditResource=function(a){this.dialogOpen(a)},a.prototype.dialogOpen=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},a.prototype.dialogOpenSuccess=function(){},a.prototype.dialogOpenCancelled=function(){},a.prototype.resourceModel=function(){return e.get(this.resourceName())},a.prototype.toModel=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,b={},c=this;a&&(c=a);var d=this.resourceModel();return f.forEachModelProp(d,function(a){b[a]=c[a]}),new d(b)},a.prototype.resourceName=function(){return this.constructor.dialogResourceName},a.prototype.dialogCancel=function(){},a.prototype.dialogClose=function(){},a}()),a("ResourceDialog",g)}}}),System.register("app/stores/location.js",["app/stores/restful"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.RestfulStore}],execute:function(){a("LocationStore",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.itemType="location",g=e,d(f,g)}return e(b,a),b}(f)),a("LocationStore",g)}}}),System.register("app/stores/user.js",["app/stores/restful"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.RestfulStore}],execute:function(){a("UserStore",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.itemType="user",g=e,d(f,g)}return e(b,a),b}(f)),a("UserStore",g)}}}),System.register("app/stores/shuttle.js",["app/stores/restful"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.RestfulStore}],execute:function(){a("ShuttleStore",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.itemType="shuttle",g=e,d(f,g)}return e(b,a),b}(f)),a("ShuttleStore",g)}}}),System.register("app/stores/trip.js",["app/stores/restful","app/models/trip"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.RestfulStore},function(a){g=a.TripStatus}],execute:function(){a("TripStore",h=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.itemType="trip",g=e,d(f,g)}return e(b,a),b}(f)),a("TripStore",h)}}}),System.register("app/events.js",["aurelia-framework","aurelia-event-aggregator"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.EventAggregator}],execute:function(){a("Events",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.ea=b}return a.prototype.publish=function(a,b){this.ea.publish(a,b)},a.prototype.subscribe=function(a,b){return this.ea.subscribe(a,b)},a}())||g)),a("Events",h)}}}),System.register("app/stores/restful.js",["app/events","aurelia-framework","app/utils","app/api"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.Events},function(a){e=a.inject},function(a){f=a.Utils},function(a){g=a.Api}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("RestfulStore",(i=e(d,g),k=i(j=function(){function a(b,d){c(this,a),this.items=[],this.itemType="default",this.events=b,this.api=d}return a.prototype.addItem=function(a){var b=this,c=function(a){b.events.publish(b.itemType+".added",a)};return this.add(a).then(function(a){c(a)})},a.prototype.add=function(a){return this.api.addItem(this.collectionType,a)},a.prototype.newNestedItemWithNoParent=function(a){return!1},a.prototype.deleteItem=function(a){var b=this;return this["delete"](a).then(function(){b.events.publish(b.itemType+".deleted",a)})},a.prototype.updateItem=function(a){var b=this;return this.update(a).then(function(a){b.events.publish(b.itemType+".updated",a)})},a.prototype["delete"]=function(a){return this.api.deleteItem(this.collectionType,a.id)},a.prototype.update=function(a){return this.api.updateItem(this.collectionType,a)},a.prototype.eventName=function(a){return this.itemType+"."+a},a.prototype.addSubscriptions=function(a,b){var c=this,d=[];return f.toMap(b).forEach(function(b,e){d.push(c.events.subscribe(c.eventName(e),function(c){a[b](c)}))}),d},a.prototype.removeSubscriptions=function(a){a.forEach(function(a){a.dispose()})},h(a,[{key:"collectionType",get:function(){return f.collectionType(this.itemType)}}]),a}())||j)),a("RestfulStore",k)}}}),System.register("app/stores/party.js",["app/stores/restful"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.RestfulStore}],execute:function(){a("PartyStore",g=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.itemType="party",g=e,d(f,g)}return e(b,a),b}(f)),a("PartyStore",g)}}}),System.register("app/stores/index.js",["./location","./user","./shuttle","./trip","./party"],function(a,b){"use strict";return{setters:[function(b){var c={};c.LocationStore=b.LocationStore,a(c)},function(b){var c={};c.UserStore=b.UserStore,a(c)},function(b){var c={};c.ShuttleStore=b.ShuttleStore,a(c)},function(b){var c={};c.TripStore=b.TripStore,a(c)},function(b){var c={};c.PartyStore=b.PartyStore,a(c)}],execute:function(){}}}),System.register("app/stores.js",["aurelia-framework","app/stores/index"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l;return{setters:[function(a){d=a.inject},function(a){e=a.LocationStore,f=a.UserStore,g=a.ShuttleStore,h=a.TripStore,i=a.PartyStore}],execute:function(){a("Stores",(j=d(e,f,g,h,i),l=j(k=function(){function a(b,d,e,f,g){c(this,a),this.locationStore=b,this.userStore=d,this.shuttleStore=e,this.tripStore=f,this.partyStore=g}return a.prototype.get=function(a){return this[a+"Store"]},a}())||k)),a("Stores",l)}}}),System.register("app/add-resource-dialog.js",["app/resource-dialog","aurelia-framework","app/stores","app/utils","app/api"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.ResourceDialog},function(a){g=a.inject,h=a.bindable},function(a){i=a.Stores},function(a){j=a.Utils},function(a){k=a.Api}],execute:function(){a("AddResourceDialog",(l=g(i,k),m=h("edited"),o=l(n=m(n=function(a){function b(e,f){c(this,b);for(var g=arguments.length,h=Array(g>2?g-2:0),i=2;i<g;i++)h[i-2]=arguments[i];var j=d(this,a.call.apply(a,[this].concat(h)));return j.subscribers=[],j.showHeader=!0,j.selectable=!0,j.subscriptions={added:"resourceAdded",updated:"resourceUpdated",deleted:"resourceDeleted"},j.actionTrigger={add:function(){j.addResource()},edit:function(a){j.editResource(a)},"delete":function(a){j.deleteResource(a)}},j.store=e.get(j.resourceName()),j.api=f,j.store.api=j.api,j}return e(b,a),b.prototype.initActionTrigger=function(){this.actionTrigger=Object.assign({},this.actionTrigger,this.actionTriggers||{})},b.prototype.getApi=function(){return this.api},b.prototype.resourceDeleted=function(a){var b=this.resourceToModel(a);this.removeFromCollection(a),this.deleted=b,this.api.notifier.success(j.capitalize(this.resourceName())+" archived successfully.")},b.prototype.removeFromCollection=function(a){j.removeFromCollection(a,this.collection())},b.prototype.deleteResource=function(a){var b=this;this.store.deleteItem(a)["catch"](function(a){b.api.notifier.danger(a)})},b.prototype.editResource=function(a){this.dialogOpenEditResource(a)},b.prototype.addResource=function(){this.dialogOpenAddResource()},b.prototype.dialogOpenAddResource=function(){this.dialogOpen()},b.prototype.viewModel=function(){return this.staticMode?a.prototype.viewModel.call(this):this.dialogAddResourceViewModel},b.prototype.resourceAdded=function(a){var b=this.resourceToModel(a);j.addToCollection(b,this.collection()),this.api.notifier.success(j.capitalize(this.resourceName())+" added successfully.")},b.prototype.resourceUpdated=function(a){var b=this.resourceToModel(a);this.edited=b,this.api.notifier.success(j.capitalize(this.resourceName())+" updated successfully.")},b.prototype.collection=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this[a||this.collectionName()]},b.prototype.resourceToModel=function(a){var b=this.toModel(a);return b.id=a.id,b},b.prototype.collectionName=function(){return j.collectionName(this.resourceName())},b.prototype.addStoreSubscriptions=function(){this.store&&(this.subscribers=this.store.addSubscriptions(this,this.subscriptions))},b.prototype.removeStoreSubscriptions=function(){this.store&&this.store.removeSubscriptions(this.subscribers)},b}(f))||n)||n)),a("AddResourceDialog",o)}}}),System.register("app/show-party.js",["aurelia-framework","app/app","app/utils","app/models/party","app/utils/table","app/add-resource-dialog"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,
("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){h=a.bindable},function(a){i=a.App},function(a){j=a.Utils},function(a){k=a.PartyModel},function(a){l=a.TableUtils},function(a){m=a.AddResourceDialog}],execute:function(){a("ShowParty",(r=q=function(a){function b(f){d(this,b);for(var g=arguments.length,h=Array(g>1?g-1:0),i=1;i<g;i++)h[i-1]=arguments[i];var j=e(this,a.call.apply(a,[this].concat(h)));return c(j,"edited",o,j),c(j,"deleted",p,j),j.props=["partyNumber","status","pickup","destination","date","departure","partySize","contactNumber","partyName"],j.accessors={partyNumber:function(a){return a.paddedNumber}},j.app=f,j.initActionTrigger(),j}return f(b,a),b.inject=function(){return[i]},b.prototype.editedChanged=function(){var a=this;this.app.appContext.selectedParty&&j.forEachModelProp(k,function(b){a.app.appContext.selectedParty[b]=a.edited[b],a.headerVals[b]=a.headerVal(b)})},b.prototype.deletedChanged=function(){this.app.appContext.selectedPartyActions.partyDeleted(),this.app.router.navigateToRoute("parties")},b.prototype.headerVal=function(a){var b=this.app.appContext.selectedParty;return this.accessors[a]?this.accessors[a](b):b[a]},b.prototype.bind=function(){var a=this;this.headers=l.headersFromProperties(this.props,this.headers||{}),this.app.appContext.partyController=this,this.headerVals={};var b=void 0;this.headers.forEach(function(c,d){b=a.props[d],a.headerVals[b]=a.headerVal(b)}),this.parties=[this.app.appContext.selectedParty]},b.prototype.activate=function(){this.addStoreSubscriptions()},b.prototype.deactivate=function(){this.removeStoreSubscriptions()},b}(m),q.dialogResourceName="party",q.dialogResourceName="party",n=r,o=g(n.prototype,"edited",[h],{enumerable:!0,initializer:null}),p=g(n.prototype,"deleted",[h],{enumerable:!0,initializer:null}),s=n)),a("ShowParty",s)}}}),System.register("app/show-archived.js",["app/utils/table","app/app-base"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.TableUtils},function(a){g=a.AppBase}],execute:function(){a("ShowArchived",h=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.props=["partyNumber","status","pickup","destination","date","departure","partySize","contactNumber","partyName"],g=e,d(f,g)}return e(b,a),b.prototype.headerVal=function(a){var b=this.props[a],c=this.app.appContext.selectedParty;return this.accessors&&this.accessors[b]?this.accessors[b](c):c[b]},b.prototype.bind=function(){this.headers=f.headersFromProperties(this.props,this.headers||{})},b}(g)),a("ShowArchived",h)}}}),System.register("app/show-trip-party.js",["app/show-archived","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j;return{setters:[function(a){f=a.ShowArchived},function(a){g=a.useView}],execute:function(){a("ShowTripParty",(h=g("./show-archived.html"),j=h(i=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f))||i)),a("ShowTripParty",j)}}}),function(){var a=System.amdDefine;a("app/show-trip.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><div if.bind="app.appContext.selectedTrip"><div class="card"><div class="card-header"><span>${trip.paddedNumber}</span></div><div class="card-content"><div class="list-block"><ul><li class="item-content" repeat.for="header of headers"><div class="item-inner"><div class="item-title">${header}</div><div class="item-after">${headerVal($index)}</div></div></li></ul></div></div></div><div class="content-block"><div class="content-block-title">Parties: ${trip.parties.length}</div><div class="list-block" if.bind="trip.parties.length > 0"><ul><li repeat.for="party of trip.parties"><a click.delegate="showParty(party)" class="pointer item-link item-content"><div class="item-inner"><div class="item-title">${party.paddedNumber}</div></div></a></li></ul></div></div></div></template>'})}(),System.register("app/show-trip.js",["app/utils/table","app/app-base"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.TableUtils},function(a){g=a.AppBase}],execute:function(){a("ShowTrip",h=function(a){function b(){var e,f,g;c(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return e=f=d(this,a.call.apply(a,[this].concat(i))),f.props=["tripNumber","status","pickup","destination","date","departure","partySize"],g=e,d(f,g)}return e(b,a),b.prototype.headerVal=function(a){var b=this.props[a],c=this.app.appContext.selectedTrip;return this.accessors&&this.accessors[b]?this.accessors[b](c):c[b]},b.prototype.showParty=function(a){this.app.appContext.selectedParty=a,this.app.router.navigateToRoute("show-trip-party")},b.prototype.bind=function(){this.headers=f.headersFromProperties(this.props,this.headers||{}),this.trip=this.app.appContext.selectedTrip},b}(g)),a("ShowTrip",h)}}}),function(){var a=System.amdDefine;a("app/trips.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/trips/trip-list.html"></require><trip-list is-a.bind="isA" list.bind="filtered" accessor.bind="accessor"></trip-list></template>'})}(),System.register("app/utils/table.js",["string"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a["default"]}],execute:function(){a("TableUtils",e=function(){function a(){c(this,a)}return a.headersFromProperties=function(a){return a.map(function(a){return d(a).humanize().capitalize().s.replace(/number/,"#")})},a}()),a("TableUtils",e)}}}),System.register("app/app-base.js",["app/app"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.App}],execute:function(){a("AppBase",e=function(){function a(b){c(this,a),this.app=b}return a.inject=function(){return[d]},a}()),a("AppBase",e)}}}),System.register("app/components/dialog.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.inject}],execute:function(){a("Dialog",e=function b(){c(this,b)}),a("Dialog",e)}}}),System.register("app/trips/show-trip.js",["aurelia-framework","app/components/dialog"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.inject},function(a){g=a.Dialog}],execute:function(){a("ShowTrip",h=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.activate=function(a){this.trip=a,this.heading="Trip: "+this.trip.paddedNumber},b.prototype.dialogCancel=function(){this.controller.cancel()},b}(g)),a("ShowTrip",h)}}}),System.register("app/trips.js",["aurelia-framework","app/utils/table","app/collection","app/app-base","app/models/index","app/trips/show-trip"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){g=a.computedFrom},function(a){h=a.TableUtils},function(a){i=a.Collection},function(a){j=a.AppBase},function(a){k=a.PartyModel,l=a.TripModel},function(a){m=a.ShowTrip}],execute:function(){n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){switch(!0){case/party #|trip #|partyNumber|tripNumber|status/i.test(a):return"";case/destination|date/i.test(a):return"hidden-xs-down";default:return"hidden-sm-down"}},a("Trips",(o=g("filtered.length"),p=function(a){function b(){c(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=d(this,a.call.apply(a,[this].concat(f)));return h.props=["partyNumber","tripNumber","status","pickup","destination","date","departure","arrival","partySize","contactNumber","roomNumber"],h.showHeader=!1,h.visibility={header:q,prop:q},h.headers={partySize:"# in Party",departure:"Departure time",arrival:"Arrival time"},h.data=[],h.isA={isParty:h.isParty,isTrip:h.isTrip},h}return e(b,a),b.prototype.dblClick=function(a){this.isTrip(a)&&this.dialog.open({viewModel:m,model:a})},b.prototype.canManage=function(){return this.app.authContext.isAdmin()},b.prototype.isTrip=function(a){return a instanceof l},b.prototype.isParty=function(a){return a instanceof k},b.prototype.activate=function(){var a=this;return this.headers=h.headersFromProperties(this.props,this.headers||{}),this.numHeaders=this.headers.length,this.properties=this.props,i.loadAll(this.app.api,this,["completedTrip","archivedParty"]).then(function(){a.data=[].concat(a.completedTrips,a.archivedParties),a.filtered=a.data})},n(b,[{key:"noData",get:function(){return 0==this.filtered.length}}]),b}(j),f(p.prototype,"noData",[o],Object.getOwnPropertyDescriptor(p.prototype,"noData"),p.prototype),r=p)),a("Trips",r)}}}),function(){var a=System.amdDefine;a("app/trips/pickup-destination.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/components/cselect"></require><div if.bind="isstatic" class="row text-center"><div id="from" class="col-40 label">Pickup:<br><a class="btn btn-default">${from}</a></div><div id="to" class="col-40 label">Destination:<br><a class="btn btn-default">${to}</a></div></div><div if.bind="!isstatic"><div class="content-block"><cselect title="Pickup" empty-text="No locations available" options.bind="locations" value.bind="from"></cselect></div><div class="content-block"><cselect title="Destination" empty-text="No locations available" options.bind="locations" blank-text="Choose a destination" value.bind="to"></cselect></div></div></template>'})}(),System.register("app/authorize-step.js",["aurelia-router","app/auth-service","app/utils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.RedirectToRoute},function(a){e=a.AuthService},function(a){f=a.Utils}],execute:function(){a("AuthorizeStep",g=function(){function a(b){c(this,a),this.authService=b}return a.inject=function(){return[e]},a.prototype.run=function(a,b){var c=a;return c&&c.config.auth?this.authService.isAuthenticated().then(function(a){return a?b():b.cancel(new d("login"))}):b()},a}()),a("AuthorizeStep",g)}}}),System.register("app/skip-main-view-step.js",["app/app-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.AppContext}],execute:function(){a("SkipMainViewStep",e=function(){function a(b){c(this,a),this.appContext=b}return a.inject=function(){return[d]},a.prototype.run=function(a,b){var c=a;if(c){var d="app/not-found"==c.config.moduleId,e=c.config.settings||{};this.appContext.skipMainView=d||1==e.skipMainView}return b()},a}()),a("SkipMainViewStep",e)}}}),System.register("app/auth-role-step.js",["aurelia-router","app/auth-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.RedirectToRoute},function(a){e=a.AuthContext}],execute:function(){a("AuthRoleStep",f=function(){function a(b){c(this,a),this.authContext=b}return a.inject=function(){return[e]},a.prototype.run=function(a,b){var c=a;if(c&&c.config&&c.config.settings){var e=c.config.settings.role;if(e&&!this.authContext.hasRole(e))return b.cancel(new d("home"))}return b()},a}()),a("AuthRoleStep",f)}}}),System.register("app/active-trip-step.js",["aurelia-router","app/auth-context","app/app-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.RedirectToRoute},function(a){e=a.AuthContext},function(a){f=a.AppContext}],execute:function(){a("ActiveTripStep",g=function(){function a(b,d){c(this,a),this.authContext=b,this.appContext=d}return a.inject=function(){return[e,f]},a.prototype.run=function(a,b){var c=this,e=a;if(e){var f="active-trip"==e.config.route;if(!f&&this.authContext.isDriver())return this.appContext.loadDriverActiveTrip().then(function(){return c.appContext.driverHasActiveTrip()?b.cancel(new d("active-trip")):b()})}return b()},a}()),a("ActiveTripStep",g)}}}),System.register("app/config/app-router.js",["app/authorize-step","app/skip-main-view-step","app/auth-role-step","app/active-trip-step"],function(a,b){"use strict";var c,d,e,f;return a("default",function(a){a.title="NPTS Shuttle App",a.options.pushState=!0,a.addPipelineStep("authorize",c),a.addPipelineStep("authorize",e),a.addPipelineStep("authorize",d),a.addPipelineStep("authorize",f),a.map([{route:"",name:"home",redirect:"parties"},{route:"parties",name:"parties",moduleId:"app/parties",nav:!0,title:"Parties",auth:!0},{route:"trips",name:"trips",moduleId:"app/trips",nav:!0,title:"Trips",auth:!0},{route:"show-trip-party",name:"show-trip-party",moduleId:"app/show-trip-party",nav:!0,title:"Show Trip Party",auth:!0},{route:"show-archived",name:"show-archived",moduleId:"app/show-archived",nav:!0,title:"Show Archived",auth:!0},{route:"show-party",name:"show-party",moduleId:"app/show-party",nav:!0,title:"Show Party",auth:!0},{route:"show-trip",name:"show-trip",moduleId:"app/show-trip",nav:!0,title:"Show Party",auth:!0},{route:"active-trip",name:"active-trip",moduleId:"app/active-trip",nav:!1,title:"Active Trip",auth:!0},{route:"login",name:"login",moduleId:"app/auth/login",nav:!1,title:"Login",settings:{skipMainView:!0}},{route:"logout",name:"logout",moduleId:"app/auth/logout",auth:!0,nav:!1,title:"Logout"},{route:"reset-password-confirm",name:"reset-password-confirm",moduleId:"app/auth/reset-password-confirm",nav:!1,title:"Reset Password Confirm",settings:{skipMainView:!0}},{route:"reset-password-request",name:"reset-password-request",moduleId:"app/auth/reset-password-request",nav:!1,title:"Reset Password Request",settings:{skipMainView:!0}},{route:"reset-pin-request",name:"reset-pin-request",moduleId:"app/auth/reset-pin-request",nav:!1,title:"Reset Pin Request",settings:{skipMainView:!0}},{route:"reset-pin-confirm",name:"reset-pin-confirm",moduleId:"app/auth/reset-pin-confirm",nav:!1,title:"Reset Pin Confirm",settings:{skipMainView:!0}}]),a.mapUnknownRoutes("app/not-found")}),{setters:[function(a){c=a.AuthorizeStep},function(a){d=a.SkipMainViewStep},function(a){e=a.AuthRoleStep},function(a){f=a.ActiveTripStep}],execute:function(){}}}),System.register("app/app.js",["aurelia-framework","app/config/app-router","app/auth-context","app/app-context","app/auth-service","app/notifier","app/api","app/f7","local-storage"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return{setters:[function(a){e=a.inject,f=a.Aurelia,h=a.computedFrom},function(a){g=a["default"]},function(a){i=a.AuthContext},function(a){j=a.AppContext},function(a){k=a.AuthService},function(a){l=a.Notifier},function(a){m=a.Api},function(a){n=a.f7},function(a){o=a["default"]}],execute:function(){p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("App",(q=e(f,i,j,k,l,m,n),r=h("authContext.isAuthenticated","appContext.skipMainView"),u=q((t=function(){function a(b,d,e,f,g,h,i){var j=this;c(this,a),this.actions={logout:function(){j.logout()}},this.aurelia=b,this.authContext=d,this.appContext=e,this.authService=f,this.notifier=g,this.api=h,this.f7=i}return a.prototype.configureRouter=function(a,b){g(a),this.router=b},a.prototype.logout=function(){var a=this;return this.authService.logout().then(function(){return o.clear(),a.router.navigate("/",{replace:!0,trigger:!1}),a.router.reset(),a.router.deactivate(),a.aurelia.setRoot("app/app")})["catch"](function(b){a.notifier.danger(b)})},p(a,[{key:"showMainView",get:function(){var a=!this.authContext.skipMainView&&this.authContext.isAuthenticated;return a}}]),a}(),d(t.prototype,"showMainView",[r],Object.getOwnPropertyDescriptor(t.prototype,"showMainView"),t.prototype),s=t))||s)),a("App",u)}}}),System.register("app/trips/pickup-destination.js",["aurelia-framework","app/app"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){f=a.bindable,g=a.bindingMode,h=a.computedFrom},function(a){i=a.App}],execute:function(){j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("PickupDestination",(k=f({defaultBindingMode:g.twoWay}),l=f({defaultBindingMode:g.twoWay}),m=h("app.appContext.locations"),n=function(){function a(b){d(this,a),c(this,"from",o,this),c(this,"to",p,this),c(this,"hotel",q,this),c(this,"isstatic",r,this),this.app=b}return a.inject=function(){return[i]},a.prototype.bind=function(){this.hotel&&(this.from=this.hotel)},a.prototype.swapFromTo=function(){var a={from:this.from,to:this.to};this.to=a.from,this.from=a.to},j(a,[{key:"locations",get:function(){return this.app.appContext.locations.map(function(a){return a.name})}}]),a}(),o=e(n.prototype,"from",[k],{enumerable:!0,initializer:null}),p=e(n.prototype,"to",[l],{enumerable:!0,initializer:null}),q=e(n.prototype,"hotel",[f],{enumerable:!0,initializer:null}),r=e(n.prototype,"isstatic",[f],{enumerable:!0,initializer:null}),e(n.prototype,"locations",[m],Object.getOwnPropertyDescriptor(n.prototype,"locations"),n.prototype),s=n)),a("PickupDestination",s)}}}),function(){var a=System.amdDefine;a("app/trips/show-party.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="app/trips/pickup-destination"></require><div class="card"><div class="card-header" role="tab" id="#{heading}"><h5 class="mb-0"><a click.bind="toggleCollapse" data-toggle="collapse" data-parent="#accordion" href="#${id}" aria-expanded="false" aria-controls="${id}">Party: ${party.paddedNumber}</a></h5></div><div id="${id}" class="collapse ${state}" role="tabpanel" aria-labelledby="${heading}"><div class="card-block"><div id="show-party-dialog"><form><div class="container"><div class="form-group row p-b-2"><center><pickup-destination isstatic="true" from.one-way="party.pickup" to.one-way="party.destination"></pickup-destination></center></div><div class="form-group row"><label class="col-xs-6 col-form-label" for="partyName">Party Name</label><div class="col-xs-6"><p class="form-control-static mb-0">${party.partyName}</p></div></div><div class="form-group row"><label class="col-xs-6 col-form-label" for="partySize">Party Size</label><div class="col-xs-6"><p class="form-control-static mb-0">${party.partySize}</p></div></div><div class="form-group row"><label class="col-xs-6 col-form-label" for="departure">Departure Time</label><div class="col-xs-6"><p class="form-control-static mb-0">${party.date} ${party.departure}</p></div></div><div class="form-group row"><label class="col-xs-6 col-form-label" for="contact-number">Contact #</label><div class="col-xs-6"><p class="form-control-static mb-0">${party.contactNumber}</p></div></div><div class="form-group row"><label class="col-xs-6 col-form-label" for="room-number">Room #</label><div class="col-xs-6"><p class="form-control-static mb-0">${party.roomNumber}</p></div></div><div class="form-group row"><label class="col-xs-6 col-form-label" for="party-notes">Trip Notes</label><div class="col-xs-6"><p class="form-control-static mb-0" innerhtml.bind="party.tripNotes"></p></div></div></div></form></div></div></div></div></template>'})}(),System.register("app/trips/show-party.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k;return{setters:[function(a){f=a.bindable}],execute:function(){j="in",a("ShowParty",(g=function(){function a(){d(this,a),c(this,"party",h,this),c(this,"id",i,this)}return a.prototype.bind=function(){this.id="collapse-"+this.id,this.heading="heading-"+this.id,this.state=""},a.prototype.toggleCollapse=function(){this.state==j&&(this.state="")},a}(),h=e(g.prototype,"party",[f],{enumerable:!0,initializer:null}),i=e(g.prototype,"id",[f],{enumerable:!0,initializer:null}),k=g)),a("ShowParty",k)}}}),function(){var a=System.amdDefine;a("app/trips/show-trip.html!github:systemjs/plugin-text@0.0.9.js",[],function(){return'<template><require from="./show-party"></require><div id="show-trip-dialog"><form><ai-dialog><ai-dialog-header><legend>${heading} <button click.delegate="dialogCancel()" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></legend></ai-dialog-header><ai-dialog-body><fieldset><div class="form-group row"><label class="col-xs-4 col-form-label" for="departure">Status</label><div class="col-xs-8"><p class="form-control-static mb-0">${trip.status}</p></div></div><div class="form-group row"><label class="col-xs-4 col-form-label" for="departure">Pickup</label><div class="col-xs-8"><p class="form-control-static mb-0">${trip.pickup}</p></div></div><div class="form-group row"><label class="col-xs-4 col-form-label" for="departure">Destination</label><div class="col-xs-8"><p class="form-control-static mb-0">${trip.destination}</p></div></div></fieldset><fieldset><div class="form-group row"><label class="col-xs-4 col-form-label" for="departure">Departure Time</label><div class="col-xs-8"><p class="form-control-static mb-0">${trip.date} ${trip.departure}</p></div></div><div class="form-group row"><label class="col-xs-4 col-form-label" for="departure">Arrival Time</label><div class="col-xs-8"><p class="form-control-static mb-0">${trip.arrival}</p></div></div></fieldset><fieldset class="m-b-1"><legend>Parties (${trip.partySize})</legend><div id="accordion" role="tablist" aria-multiselectable="true"><show-party repeat.for="party of trip.parties" party.bind="party" id.bind="$index" class="m-2"></show-party></div></fieldset></ai-dialog-body><ai-dialog-footer><button click.delegate="dialogCancel()">Close</button></ai-dialog-footer></ai-dialog></form></div></template>'})}(),System.register("app/deferred.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Deferred",d=function(){function a(){c(this,a)}return a.prototype.defer=function(a){return new Promise(function(b,c){return a().then(function(a){b(a)}).fail(function(a){c(a)})})},a}()),a("Deferred",d)}}}),System.register("app/notifier.js",["app/f7"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.f7,e=a.f7m,f=a.$$}],execute:function(){a("Notifier",g=function(){function a(){c(this,a)}return a.prototype.success=function(a){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d.addNotification({title:"NPTS Shuttle",message:a,closeIcon:!1,closeOnClick:!0,hold:"2000",media:'<i class="f7-icons">check_round</i>'})},a.prototype.danger=function(a){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d.addNotification({title:"NPTS Shuttle",hold:"8000",closeIcon:!1,closeOnClick:!0,message:a,media:'<i class="f7-icons">close_round</i>'})},a.prototype.formError=function(a){d.addNotification({title:"Form Error",closeIcon:!1,hold:"5000",closeOnClick:!0,message:a.message,media:'<i class="f7-icons">close_round</i>'})},a}()),a("Notifier",g)}}}),System.register("app/api.js",["app/deferred","app/notifier"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.Deferred},function(a){g=a.Notifier}],execute:function(){a("Api",h=function(a){function b(e){c(this,b);for(var f=arguments.length,g=Array(f>1?f-1:0),h=1;h<f;h++)g[h-1]=arguments[h];var i=d(this,a.call.apply(a,[this].concat(g)));return i.notifier=e,i.isRequesting=!1,i}return e(b,a),b.inject=function(){return[g]},b.prototype.startTrip=function(a,b,c,d,e){return this.defer(function(){return dpd.starttrip.post({driverId:a,expectedDepartureTime:b,shuttleId:e,partyIds:[],pickup:c,destination:d})},!1)},b.prototype.completeTrip=function(a,b,c){return this.defer(function(){return dpd.completetrip.post(Object.assign({},{driverId:a,tripId:b},c))},!1)},b.prototype.completeSingleTrip=function(a,b,c,d,e,f,g){return this.defer(function(){return dpd.completesingletrip.post({startTime:{utc:c},driverId:a,expectedDepartureTime:b,shuttleId:f,partyId:g,pickup:d,destination:e})},!1)},b.prototype.getAll=function(a){return this.defer(function(){return dpd[a].get()},!1)},b.prototype.getShuttlesAtLocation=function(a){return this.defer(function(){return dpd.shuttles.get({locationId:a})})},b.prototype.driverActiveTrip=function(a){return this.defer(function(){return dpd.activetrips.get({driverId:a})})},b.prototype.updateItem=function(a,b){return this.defer(function(){return dpd[a].put(b)},!1)},b.prototype.addItem=function(a,b){return this.defer(function(){return dpd[a].post(b)},!1)},b.prototype.deleteItem=function(a,b){return this.defer(function(){return dpd[a].del({id:b})},!1)},b.prototype.confirmResetPasswordRequest=function(a){return this.defer(function(){return dpd.resetpasswordconfirm.post({token:a})},!1)},b.prototype.confirmResetPinRequest=function(a){return this.defer(function(){return dpd.resetpinconfirm.post({token:a})},!1)},b.prototype.requestResetPassword=function(a){return this.defer(function(){return dpd.resetpasswordrequest.post({username:a})},!1)},b.prototype.requestResetPin=function(a){return this.defer(function(){return dpd.resetpinrequest.post({username:a})},!1)},b.prototype.requestAccountActivate=function(a){return this.defer(function(){return dpd.activateaccountrequest.post({username:a})},!1)},b.prototype.resetPassword=function(a,b){return this.defer(function(){return dpd.resetpassword.post({newPassword:a,token:b})},!1);
},b.prototype.resetPin=function(a,b){return this.defer(function(){return dpd.resetpin.post({newPin:a,token:b})},!1)},b.prototype.defer=function(b){var c=this,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isRequesting=!0;var e=a.prototype.defer.call(this,b).then(function(a){return c.isRequesting=!1,a});return e=e["catch"](function(a){c.isRequesting=!1;var b=a?a.errors||a.message:c.defaultErrMessage;return console.log("whooops",a),d?void c.notifier.danger(b):Promise.reject(b)})},b}(f)),a("Api",h)}}}),System.register("app/net.js",["aurelia-http-client","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a.HttpClient},function(a){g=a.inject,h=a.bindable}],execute:function(){m=function(a){var b=this;return a.configure(function(a){a.withInterceptor({request:function(a){return b.isRequesting=!0,a},response:function(a){return b.isRequesting=!1,a},requestError:function(a){throw b.isRequesting=!1,a},responseError:function(a){throw b.isRequesting=!1,a}})}),a},a("Net",(i=g(f),n=i((k=function(){function a(b){d(this,a),c(this,"isRequesting",l,this),this.httpClient=m.call(this,b)}return a.prototype.client=function(){return this.httpClient},a}(),l=e(k.prototype,"isRequesting",[h],{enumerable:!0,initializer:function(){return!1}}),j=k))||j)),a("Net",n)}}}),System.register("app/data-source.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("DataSource",d=function(){function a(b,d){c(this,a),this.api=b,this.collection=d}return a.prototype.getAll=function(){return this.api.getAll(this.collection)},a}()),a("DataSource",d)}}}),System.register("app/collection.js",["app/data-source","app/utils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.DataSource},function(a){e=a.Utils}],execute:function(){a("Collection",f=function(){function a(b,f,g){c(this,a),this.resource=g,this.target=f,this.collection=e.collectionType(g),this.dataSource=new d(b,this.collection)}return a.loadAll=function(b,c,d){var e=function(a){return function(){return a.load()}};return Promise.all(d.map(function(d){return e(new a(b,c,d))()}))},a.prototype.load=function(){var a=this;return this.dataSource.getAll().then(function(b){var c=e.collectionName(a.resource);a.target[c]=e.mapCollection(a.resource,b)})},a}()),a("Collection",f)}}}),System.register("app/app-context.js",["app/api","app/net","app/f7","aurelia-framework","app/collection","app/utils","app/auth-context","local-storage"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){e=a.Api},function(a){f=a.Net},function(a){g=a.f7},function(a){h=a.computedFrom},function(a){i=a.Collection},function(a){j=a.Utils},function(a){k=a.AuthContext},function(a){l=a["default"]}],execute:function(){m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p="#popup.popup",q="#npopup.npopup",a("AppContext",(n=h("api.isRequesting","net.isRequesting"),o=function(){function a(b,d,e,f){c(this,a),this.currentTrip=null,this.canShowPopup=!1,this.skipMainView=!0,this.api=b,this.net=d,this.utils=j,this.f7=e,this.isAndroid=this.f7.device.android,this.authContext=f}return a.inject=function(){return[e,f,g,k]},a.prototype.closePopup=function(){this.f7.closeModal(p),this.canShowPopup=!1,this.popupCallback&&this.popupCallback()},a.prototype.showPopup=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.popupView=a,this.popupModel=b,this.canShowPopup=!0,this.popupCallback=c,this.f7.popup(p)},a.prototype.closeNPopup=function(){this.f7.closeModal(q),this.canShowNPopup=!1,this.nPopupCallback&&this.nPopupCallback()},a.prototype.showNPopup=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.nPopupView=a,this.nPopupModel=b,this.canShowNPopup=!0,this.nPopupCallback=c,this.f7.popup(q)},a.prototype.loadDriverActiveTrip=function(){var a=this;return this.api.driverActiveTrip(this.authContext.currentUser.id).then(function(b){a.activeTrip=b[0]})},a.prototype.storedCurrentDriverShuttleId=function(){return"npts:driver-shuttle-"+this.authContext.currentUser.id},a.prototype.selectedParties=function(){return Array.from(this.selectedRows.values())},a.prototype.loadCurrentDriverShuttleId=function(){return this.driverShuttleId=l.get(this.storedCurrentDriverShuttleId()),this.driverShuttleId},a.prototype.setCurrentDriverShuttleId=function(a){l.set(this.storedCurrentDriverShuttleId(),a),this.driverShuttleId=a},a.prototype.loadLocations=function(){return i.loadAll(this.api,this,["location"])},a.prototype.tripSelectedParties=function(){var a=this.tripPartyIds();return this.reservedActiveParties(function(b){return a.includes(b.id)})},a.prototype.tripPartyIds=function(){return this.startTripPartyIds.concat(this.midTripPartyIds)},a.prototype.driverHasActiveTrip=function(){return!this.utils.isNullOrUndefined(this.activeTrip)},a.prototype.loadReservedActiveParties=function(a){var b=this;return i.loadAll(this.api,this,["reservedActiveParty"]).then(function(){a&&(a.reservedActiveParties=b.reservedActiveParties)})},m(a,[{key:"isLoading",get:function(){return(this.api.isRequesting||this.net.isRequesting)===!0}}]),a}(),d(o.prototype,"isLoading",[n],Object.getOwnPropertyDescriptor(o.prototype,"isLoading"),o.prototype),r=o)),a("AppContext",r)}}}),System.register("app/with-context.js",["aurelia-framework","app/app-context"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.computedFrom},function(a){e=a.AppContext}],execute:function(){a("WithContext",f=function(){function a(b){c(this,a),this.appContext=b}return a.inject=function(){return[e]},a}()),a("WithContext",f)}}}),System.register("app/validation-rules.js",["aurelia-validation"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.ValidationRules}],execute:function(){c.customRule("positiveInteger",function(a,b){var c=Number.parseInt(a);return Number.isInteger(c)&&c>0},"${$displayName} must be integer greater than 0"),c.customRule("phoneLength",function(a,b){return a&&10==a.replace(/[\s|\(|\)|-]/g,"").length},"${$displayName} must have 10 digits"),c.customRule("shuttleYear",function(a,b){var c=Number.parseInt(a);return Number.isInteger(c)&&c>1900},"${$displayName} must be greater than 1900"),c.customRule("partySize",function(a,b){return a&&a.length>0},"Number of ${$displayName} should be at least 1")}}}),System.register("app/f7.js",["framework7"],function(a,b){"use strict";var c,d;return{setters:[function(a){}],execute:function(){a("$$",c=Dom7),a("$$",c),a("f7",d=new window.Framework7({router:!1,materialRipple:!1,fastClicks:!1})),a("f7",d),d.device.android?c("head").append('<link rel="stylesheet" href="jspm_packages/npm/framework7@1.4.2/dist/css/framework7.material.min.css"><link rel="stylesheet" href="jspm_packages/npm/framework7@1.4.2/dist/css/framework7.material.colors.min.css">'):c("head").append('<link rel="stylesheet" href="jspm_packages/npm/framework7@1.4.2/dist/css/framework7.ios.min.css"><link rel="stylesheet" href="jspm_packages/npm/framework7@1.4.2/dist/css/framework7.ios.colors.min.css">')}}}),System.register("app/dependencies.js",["./validation-rules","deployd","./f7"],function(a,b){"use strict";return{setters:[function(a){},function(a){},function(a){}],execute:function(){}}}),System.register("app/config/api.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("ApiConfig",c={URL:"https://npts-shuttle-api.herokuapp.com"}),a("ApiConfig",c)}}}),System.register("app/auth-context.js",["app/utils","app/models/user"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.Utils},function(a){e=a.UserModel}],execute:function(){a("AuthContext",f=function(){function a(){c(this,a),this.currentUser=void 0,this.isAuthenticated=!1}return a.prototype.isAdmin=function(){return this.currentUser&&this.currentUser.isAdmin()},a.prototype.isSuperAdmin=function(){return this.currentUser&&this.currentUser.isSuperAdmin()},a.prototype.isDriver=function(){return this.currentUser&&this.currentUser.isDriver()},a.prototype.isUser=function(){return this.currentUser&&this.currentUser.isUser()},a.prototype.hasRole=function(a){var b="is"+a;return this.currentUser&&this.currentUser[b]&&this.currentUser[b]()},a.prototype.hasLocation=function(){return this.currentUser&&!d.isEmptyString(this.currentUser.location)},a.prototype.currentLocation=function(){if(this.currentUser)return this.currentUser.location},a.prototype.isLoggedIn=function(){return this.isAuthenticated},a.prototype.loggedIn=function(a){this.currentUser=new e(a),this.isAuthenticated=!0},a.prototype.loggedOut=function(){this.currentUser=void 0,this.isAuthenticated=!1},a}()),a("AuthContext",f)}}}),System.register("app/models/user.js",["./model","string"],function(a,b){"use strict";function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){f=a.Model},function(a){g=a["default"]}],execute:function(){l="SuperAdmin",m="Admin",n="User",o="Driver",p=[m,l],a("UserTypes",(i=h=function b(){e(this,b)},h.types=[m,n,o],h.user=n,h.superAdmin=l,q=i)),a("UserTypes",q),a("UserModel",(k=j=function(a){function b(){return e(this,b),c(this,a.apply(this,arguments))}return d(b,a),b.prototype.name=function(){return this.firstName+" "+this.lastName},b.prototype.isAdmin=function(){return p.includes(this.type)},b.prototype.isSuperAdmin=function(){return this.type==l},b.prototype.isDriver=function(){return this.type==o},b.prototype.isUser=function(){return this.type==n},b.prototype.isActive=function(){return this.active===!0},b.prototype.onInit=function(){this.firstName&&this.lastName&&(this.initials=[this.firstName[0],this.lastName[0]].map(function(a){return g(a).capitalize().s}).join("")),this.location||(this.location="")},b}(f),j.props=["firstName","lastName","type","username","email","password","location","locationId","active","pin"],r=k)),a("UserModel",r)}}}),System.register("app/models/trip.js",["app/models/date-model","app/models/party"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k;return{setters:[function(a){f=a.DateModel},function(a){g=a.PartyModel}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("TripModel",(j=i=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.onInit=function(){var a=this.constructor.getDateTime(this.departureTime.utc),b=a[0],c=a.slice(1);this.date=b,this.departure=c,this.arrivalTime&&(this.arrival=this.constructor.dateTime(this.arrivalTime.utc).join(" ")),this.partySize=this.parties.reduce(function(a,b){return a+b.partySize},0),this.parties=this.parties.map(function(a){return new g(a)})},h(b,[{key:"paddedNumber",get:function(){return"T-"+this.utils.padded(this.tripNumber)}}]),b}(f),i.props=["tripNumber","departureTime","arrivalTime","destination","status","pickup","partyIds","parties"],k=j)),a("TripModel",k)}}}),System.register("app/models/date-model.js",["app/models/model","moment-timezone"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i;return{setters:[function(a){f=a.Model},function(a){g=a["default"]}],execute:function(){h=function(a){return g.unix(a).format("M/D/YY h:mm a z").toString().split(" ")},a("DateModel",i=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.dateTime=function(a){return g.unix(a).format("M/D/YY h:mm a z").toString().split(" ")},b.getDateTime=function(a){var b=this.dateTime(a),c=b[0],d=b.slice(1);return[c,d.join(" ")]},b}(f)),a("DateModel",i)}}}),System.register("app/models/party.js",["app/models/date-model","moment-timezone"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.DateModel},function(a){g=a["default"]}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k={ARCHIVED:"Archived",LATE:"Late",ACTIVE:"Active",RESERVED:"Reserved",COMPLETED:"Completed"},a("PartyModel",(j=i=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.display=function(){return this.paddedNumber+": "+this.partyName+" Party of "+this.partySize+" "},b.prototype.onInit=function(){if(this.departureTime){var a=this.constructor.getDateTime(this.departureTime.utc),b=a[0],c=a.slice(1);this.date=b,this.departure=c,this.tripArrivalTime&&(this.arrival=this.constructor.dateTime(this.tripArrivalTime.utc).join(" ")),this.status=this.partyStatus}},h(b,[{key:"paddedNumber",get:function(){return"P-"+this.utils.padded(this.partyNumber)}},{key:"partyStatus",get:function(){return this.archived?k.ARCHIVED:this.tripId?this.tripStatus:g().unix()>this.departureTime.utc?k.LATE:k.RESERVED}},{key:"isLate",get:function(){return this.partyStatus==k.LATE}},{key:"isReserved",get:function(){return this.partyStatus==k.RESERVED}},{key:"isCompleted",get:function(){return this.partyStatus==k.COMPLETED}},{key:"isArchived",get:function(){return this.partyStatus==k.ARCHIVED}},{key:"isActive",get:function(){return this.partyStatus==k.ACTIVE}}]),b}(f),i.props=["partyNumber","pickup","destination","date","partyName","departureTime","partySize","contactNumber","tripId","tripDepartureTime","tripArrivalTime","tripStatus","archived","roomNumber","tripNotes"],l=j)),a("PartyModel",l)}}}),System.register("app/models/index.js",["./location","./shuttle","./user","./trip","./party"],function(a,b){"use strict";return{setters:[function(b){var c={};c.LocationModel=b.LocationModel,a(c)},function(b){var c={};c.ShuttleModel=b.ShuttleModel,a(c)},function(b){var c={};c.UserModel=b.UserModel,a(c)},function(b){var c={};c.TripModel=b.TripModel,a(c)},function(b){var c={};c.PartyModel=b.PartyModel,a(c)}],execute:function(){}}}),System.register("app/models/location.js",["app/models/model"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i;return{setters:[function(a){f=a.Model}],execute:function(){a("LocationModel",(h=g=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f),g.props=["name","address","city","state","zip","phone"],i=h)),a("LocationModel",i)}}}),System.register("app/models/model.js",["app/utils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.Utils}],execute:function(){a("Model",(f=e=function(){function a(){var b=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,a),this.constructor.props.forEach(function(a){b[a]=e[a]}),this.id=e.id,this.utils=d,this.onInit()}return a.prototype.onInit=function(){},a.prototype.isNew=function(){return void 0===this.id},a}(),e.props=[],g=f)),a("Model",g)}}}),System.register("app/models/shuttle.js",["app/models/model"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i;return{setters:[function(a){f=a.Model}],execute:function(){a("ShuttleModel",(h=g=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(f),g.props=["name","location","licensePlate","capacity","make","model","locationId","year"],i=h)),a("ShuttleModel",i)}}}),System.register("app/models.js",["app/models/index","app/models/location","app/models/shuttle","string"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a},function(a){e=a.LocationModel},function(a){f=a.ShuttleModel},function(a){g=a["default"]}],execute:function(){d.LocationModel=e,d.ShuttleModel=f,h=function(a){switch(!0){case/user|.*driver/i.test(a):return"user";case/party|.*party/i.test(a):return"party";case/trip|.*trip/i.test(a):return"trip";default:return a}},i=function(a){return d[g(h(a)).capitalize().s+"Model"]},a("Models",j=function(){function a(){c(this,a)}return a.get=function(a){return i(a)},a.properties=function(a){var b=this.get(a);return b?b.props:[]},a}()),a("Models",j)}}}),System.register("app/utils.js",["es6-mapify","string","app/models","pad-number"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.mapify},function(a){e=a["default"]},function(a){f=a.Models},function(a){g=a["default"]}],execute:function(){a("Utils",h=function(){function a(){c(this,a)}return a.toMap=function(a){return d(a)},a.isNullOrUndefined=function(a){return null===a||void 0===a},a.addToCollection=function(a,b){b.unshift(a)},a.removeFromCollection=function(a,b){var c=b.findIndex(function(b){return b.id===a.id});c!=-1&&b.splice(c,1)},a.stringIncludes=function(a,b){return e(a).include(b)},a.isEmptyString=function(a){return"string"==typeof a&&e(a).isEmpty()},a.padded=function(a){arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return g(a,4)},a.collectionName=function(a){return/party|.*party/i.test(a)?a.replace(/arty/,"arties"):a+"s"},a.mapCollection=function(a,b){var c=f.get(a);return c?b.map(function(a){return new c(a)}):b},a.capitalize=function(a){return e(a).capitalize().s},a.dasherize=function(a){return e(a).dasherize().s},a.titleize=function(a){var b=this;return e(a).humanize().s.split(" ").map(function(a){return b.capitalize(a)}).join(" ")},a.collectionType=function(a){return this.collectionName(e(a).dasherize().s.replace(/-/g,""))},a.forEachModelProp=function(a,b){a&&a.props.forEach(function(a){b(a)})},a}()),a("Utils",h)}}}),System.register("app/auth-service.js",["app/config/api","app/auth-context","app/utils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.ApiConfig},function(a){e=a.AuthContext},function(a){f=a.Utils}],execute:function(){g=function(){var a=this;return new Promise(function(b,c){dpd.users.me(function(d,e){if(e)return c(e);var f=new Object(d);f.id&&a.authContext.loggedIn(f),b(void 0!=f.id)})})},h=function(a,b){var c=this;return new Promise(function(d,e){var f="login"==a?dpd.users.login:dpd.loginwithpin.post;f(b,function(a,b){var f=function(a){a?d(c.authContext.currentUser):e(b||{})};if(a){if(!new UserModel(a).isDriver())return console.log("rejecting"),c.logout().then(function(){e("Only drivers can use this app.")});c.authContext.loggedIn(a),f(!0)}else{if(!b)return g.call(c).then(function(a){f(a)});f(!1)}})})},a("AuthService",i=function(){function a(b){c(this,a),this.authContext=b,dpd.setBaseUrl(d.URL)}return a.inject=function(){return[e]},a.prototype.passwordLogin=function(a,b){return h.call(this,"login",{username:a,password:b})},a.prototype.pinLogin=function(a,b){return h.call(this,"pinlogin",{locationId:a,pin:b})},a.prototype.logout=function(){var a=this;return new Promise(function(b,c){dpd.users.logout(function(d,e){e?c(e):(a.authContext.loggedOut(),b(d))})})},a.prototype.isAuthenticated=function(){return g.call(this)},a}()),a("AuthService",i)}}}),System.register("init.js",["app/dependencies","app/auth-service"],function(a,b){"use strict";function c(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-validation"),a.start().then(function(){return console.log("set root"),a.container.get(d).isAuthenticated().then(function(){a.setRoot("app/app")})})}var d;return a("configure",c),{setters:[function(a){},function(a){d=a.AuthService}],execute:function(){}}});